<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class CPersistentDocument | MyWrapper Reference Documentation</title>

	<script type="text/javascript" src="resources/combined.js?368249000"></script>
	<script type="text/javascript" src="elementlist.js?2116948467"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active main"><a href="package-MyWrapper.html">MyWrapper<span></span></a>
						<ul>
				<li class="main"><a href="package-MyWrapper.Data.html">Data</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Definitions.html">Definitions</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Framework.html">Framework</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Functions.html">Functions</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Ontology.html">Ontology</a>
						</li>
				<li class="active main"><a href="package-MyWrapper.Persistence.html">Persistence</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Wrappers.html">Wrappers</a>
						</li>
							</ul></li>
				<li><a href="package-PHP.html">PHP</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-CMongoContainer.html">CMongoContainer</a></li>
				<li><a href="class-CMongoDatabase.html">CMongoDatabase</a></li>
				<li><a href="class-CMongoQuery.html">CMongoQuery</a></li>
				<li><a href="class-CMongoServer.html">CMongoServer</a></li>
				<li class="active"><a href="class-CPersistentDocument.html">CPersistentDocument</a></li>
				<li><a href="class-CPersistentObject.html">CPersistentObject</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-MyWrapper.Persistence.html" title="Summary of MyWrapper\Persistence"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class CPersistentDocument</h1>


	<div class="description">
	
<h3>Persistent document ancestor</h3>

<p>A persistent document object is a document object that knows how to persist
in derived concrete instances of the <code><a href="class-CContainer.html">CContainer</a></code> class. This class
features a default offset, kOFFSET_NID, which represents the database
native unique identifier, or primary key. All objects derived from this class
are uniquely identified by this offset.</p>

<p>This class implements a series of persistence methods:</p>

<ul>
	<li><code><a href="class-CPersistentDocument.html#_Insert">CPersistentDocument::Insert()</a></code>: This method will insert the object into a container, if
	the object already exists, the method will raise an exception.</li>

	<li><code><a href="class-CPersistentDocument.html#_Update">CPersistentDocument::Update()</a></code>: This method will update the object in a container, if the
	object does not exist, the method will raise an exception.</li>

	<li><code><a href="class-CPersistentDocument.html#_Replace">CPersistentDocument::Replace()</a></code>: This method will either insert, if the object is not
	found in the container, or update, if the object exists in the container.</li>

	<li><code><a href="class-CPersistentDocument.html#_Restore">CPersistentDocument::Restore()</a></code>: This method will load the object from the container and
	restore its data, the method expects the object to have its native unique
	identifier, kOFFSET_NID, set, or it will raise an exception.</li>

	<li><code><a href="class-CPersistentDocument.html#_Delete">CPersistentDocument::Delete()</a></code>: This method will delete the object from a container.</li>

	<li><code><a href="class-CPersistentDocument.html#_NewObject">CPersistentDocument::NewObject()</a></code>: This static method can be used to instantiate an object
	by retrieving it from a container. The class of the object will be set according
	to the class used in the static call.</li>
</ul>

<p>These methods take advantage of the inherited protected interface which can
be used to process the object before, <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code>, and after, Postcommit() it is committed, these are the methods that derived classes should
overload to implement custom workflows. In this class we use it to set the
<code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code> status and reset the <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status whenever
the object is stored or loaded from a container, and reset both when the object
is deleted.</p>

<p>The method implements an accessor method for the native unique identifier,
<code><a href="class-CPersistentDocument.html#_NID">CPersistentDocument::NID()</a></code>.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-ArrayObject.html"><span>ArrayObject</span></a>
			
			 implements 
				<a href="class-IteratorAggregate.html"><span>IteratorAggregate</span></a>, 
			
				<a href="class-Traversable.html"><span>Traversable</span></a>, 
			
				<a href="class-ArrayAccess.html"><span>ArrayAccess</span></a>, 
			
				<a href="class-Serializable.html"><span>Serializable</span></a>, 
			
				<a href="class-Countable.html"><span>Countable</span></a>
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CDocument.html"><span>CDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:60px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CStatusDocument.html"><span>CStatusDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:90px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>CPersistentDocument</span></b>			
			
			
		</dd>
	</dl>


	<div>
		<h4>Direct known subclasses</h4>
			<a href="class-CPersistentObject.html">CPersistentObject</a>
	</div>

	<div>
		<h4>Indirect known subclasses</h4>
			<a href="class-CEdge.html">CEdge</a>, 
			<a href="class-CNode.html">CNode</a>, 
			<a href="class-COntologyEdge.html">COntologyEdge</a>, 
			<a href="class-COntologyNode.html">COntologyNode</a>, 
			<a href="class-COntologyTag.html">COntologyTag</a>, 
			<a href="class-COntologyTerm.html">COntologyTerm</a>, 
			<a href="class-CTag.html">CTag</a>, 
			<a href="class-CTerm.html">CTerm</a>
	</div>





	<div class="info">
		
		
		
		<b>Package:</b> <a href="package-MyWrapper.html">MyWrapper</a>\<a href="package-MyWrapper.Persistence.html">Persistence</a><br />

				<b>Author:</b>
				Milko A. Škofič &lt;<a
href="mailto:m.skofic&#64;cgiar.org">m.skofic&#64;<!---->cgiar.org</a>&gt;<br />
		<b>Located at</b> <a href="source-class-CPersistentDocument.html#43-1337" title="Go to source code">CPersistentDocument.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="NID" id="_NID">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_NID">#</a>
		<code><a href="source-class-CPersistentDocument.html#97-137" title="Go to source code">NID</a>( <span>mixed <var>$theValue</var> = <span class="php-keyword1">NULL</span></span>, <span>boolean <var>$getOld</var> = <span class="php-keyword1">FALSE</span> </span> )</code>

		<div class="description short">
			
<h4>Manage native unique identifier</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Manage native unique identifier</h4>

<p>The <i>native unique identifier</i>, kOFFSET_NID, represents the
primary key of the object in the native format of the container in which the
object is stored.</p>

<p>This is the only attribute tag that will not be a <code><a href="class-COntologyTag.html">COntologyTag</a></code>
reference: all other object attributes will be a <code><a href="class-COntologyTag.html">COntologyTag</a></code> native
identifier, kOFFSET_NID.</p>

<p>The method accepts a parameter which represents either the identifier or the
requested operation, depending on its value:</p>

<ul>
	<li><tt>NULL</tt>: Return the current value.</li>

	<li><tt>FALSE</tt>: Delete the current value.</li>

	<li><i>other</i>: Set the value with the provided parameter.</li>
</ul>

<p>The second parameter is a boolean which if <tt>TRUE</tt> will return the
<i>old</i> value when replacing containers; if <tt>FALSE</tt>, it will return
the currently set value.</p>

<p>Note that when the object has the <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code> status this offset
will be locked and an exception will be raised.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theValue</var></dt>
					<dd><code>mixed</code><br>$theValue Native identifier or operation.</dd>
					<dt><var>$getOld</var></dt>
					<dd><code>boolean</code><br>$getOld <tt>TRUE</tt> get old value.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br><i>New</i> or <i>old</i> native container.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kOFFSET_NID<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="function-ManageOffset.html">ManageOffset()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="Insert" id="_Insert">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Insert">#</a>
		<code><a href="source-class-CPersistentDocument.html#153-227" title="Go to source code">Insert</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Insert the object into a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Insert the object into a container</h4>

<p>This method will insert the current object into the provided container, if a
duplicate object already exists in the container, the method will raise an
exception.</p>

<p>The method expects a single parameter, <tt>$theConnection</tt>, which
represents the container in which the object should be stored. This parameter
should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a concrete instance
of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class has implemented
the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</p>

<p>The method may set the native unique identifier attribute (kOFFSET_NID) if not provided.</p>

<p>The operation will only be performed if the object has the <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code>
status set or if it does not have its <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code> status set, in this
event the method will return <tt>NULL</tt>.</p>

<p>The method will return the object's native unique identifier attribute
(kOFFSET_NID), or raise an exception if an error occurs.</p>

<p>Note that derived classes should overload the <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code> and <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> methods, rather than overloading this one.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>The object's native identifier.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_INSERT<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code></code> <br />
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="Update" id="_Update">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Update">#</a>
		<code><a href="source-class-CPersistentDocument.html#234-304" title="Go to source code">Update</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Update the object in a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update the object in a container</h4>

<p>This method will update the current object into the provided container, if
the object cannot be found in the container, the method will raise an
exception.</p>

<p>The method expects a single parameter, <tt>$theConnection</tt>, which
represents the container in which the object should be stored. This parameter
should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a concrete instance
of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class has implemented
the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</p>

<p>Once the object has been stored, it will have its <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code>
status set and its <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status reset.</p>

<p>The method will raise an exception if the object has not the <code><a href="class-CStatusDocument.html#__IsInited">CStatusDocument::_IsInited()</a></code> status set.</p>

<p>Note that derived classes should overload the <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code> and <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> methods, rather than overloading this one.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_UPDATE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code></code> <br />
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="Replace" id="_Replace">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Replace">#</a>
		<code><a href="source-class-CPersistentDocument.html#311-388" title="Go to source code">Replace</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Replace the object into a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Replace the object into a container</h4>

<p>This method will insert the current object into the provided container, if
not found, or update the object if already there.</p>

<p>The method expects a single parameter, <tt>$theConnection</tt>, which
represents the container in which the object should be stored. This parameter
should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a concrete instance
of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class has implemented
the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</p>

<p>The operation will only be performed if the object is not yet committed or if
the object has its <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> dirty status set, if not, the method will
do nothing.</p>

<p>Once the object has been stored, it will have its <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code>
status set and its <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status reset.</p>

<p>The method may set the native unique identifier attribute (kOFFSET_NID) if not provided.</p>

<p>The method will return the object's native unique identifier attribute
(kOFFSET_NID) or <tt>NULL</tt> if the operation was not necessary.</p>

<p>Note that derived classes should overload the <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code> and <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> methods, rather than overloading this one.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>The object's native identifier.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_REPLACE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code></code> <br />
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="Restore" id="_Restore">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Restore">#</a>
		<code><a href="source-class-CPersistentDocument.html#395-474" title="Go to source code">Restore</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Restore the object from a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Restore the object from a container</h4>

<p>This method will load the current object with data from a document in a
container.</p>

<p>The method expects a single parameter, <tt>$theConnection</tt>, which
represents the container in which the object should be stored. This parameter
should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a concrete instance
of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class has implemented
the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</p>

<p>The current object must have its native unique identifier offset, kOFFSET_NID, set, or it must have all the necessary elements in order to
generate this identifier.</p>

<p>The method will return <tt>TRUE</tt> if the operation was successful,
<tt>NULL</tt> if the object is not present in the container, or raise an
exception if an error occurs.</p>

<p>If the operation succeeds, the <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status will be reset and
the <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code> status will be set.</p>

<p>Note that derived classes should overload the <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> method,
rather than overloading this one, also note that the <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code> method
is obviously not called here.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>The operation status.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kOFFSET_NID<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="Delete" id="_Delete">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Delete">#</a>
		<code><a href="source-class-CPersistentDocument.html#481-534" title="Go to source code">Delete</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Delete the object from a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Delete the object from a container</h4>

<p>This method will remove the current object from the provided container.</p>

<p>The method expects a single parameter, <tt>$theConnection</tt>, which
represents the container in which the object should be stored. This parameter
should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a concrete instance
of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class has implemented
the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</p>

<p>Once the object has been deleted, it will have its <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code>
status and its <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status reset.</p>

<p>The method will return <tt>TRUE</tt> if the object was deleted or
<tt>FALSE</tt> if the object was not found in the container.</p>

<p>Note that derived classes should overload the <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code> and <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> methods, rather than overloading this one.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br><tt>TRUE</tt> deleted, <tt>FALSE</tt> not found.<br />
				</div>


				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="NewObject" id="_NewObject">

		<td class="attributes"><code>
			 public static
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_NewObject">#</a>
		<code><a href="source-class-CPersistentDocument.html#550-617" title="Go to source code">NewObject</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>mixed <var>$theIdentifier</var></span> )</code>

		<div class="description short">
			
<h4>Instantiate an object from a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Instantiate an object from a container</h4>

<p>This method will retrieve a document from the provided container, instantiate
this class with it and return the object; if the document was not located in the
container, the method will return <tt>NULL</tt>.</p>

<p>The method expects a single parameter, <tt>$theConnection</tt>, which
represents the container in which the object should be stored. This parameter
should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a concrete instance
of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class has implemented
the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</p>

<p>The method expects two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object should be stored.
	This parameter should be a concrete instance of of <code><a href="class-CContainer.html">CContainer</a></code>, or a
	concrete instance of <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>, if the current class
	has implemented the container resolve interface with <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and
	<code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code>.</li>

	<li><tt>$theIdentifier</tt>: The key of the object in the container, by default
	the kOFFSET_NID offset.</li>
</ul>

<p>If the object could not be located, the method will return <tt>NULL</tt>.</p>

<p>Note that the resulting object will be of the class with which this static
method was called.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$theIdentifier</var></dt>
					<dd><code>mixed</code><br>$theIdentifier Identifier.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>The retrieved object.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="DefaultDatabase" id="_DefaultDatabase">

		<td class="attributes"><code>
			 public static
			<code><a href="class-CDatabase.html">CDatabase</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_DefaultDatabase">#</a>
		<code><a href="source-class-CPersistentDocument.html#633-650" title="Go to source code">DefaultDatabase</a>( <span><code><a href="class-CServer.html">CServer</a></code> <var>$theServer</var></span> )</code>

		<div class="description short">
			
<h4>Return the object default database</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return the object default database</h4>

<p>This static method should be used to get the the class default database given
a server. It expects a <code><a href="class-CServer.html">CServer</a></code> derived object and should return a <code><a href="class-CDatabase.html">CDatabase</a></code> derived object.</p>

<p>If the class does not feature a default database, this method should return
<tt>NULL</tt>.</p>

<p>By default we assume no default containers.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theServer</var></dt>
					<dd><code><code><a href="class-CServer.html">CServer</a></code></code><br>$theServer Server object.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-CDatabase.html">CDatabase</a></code></code><br>The default database.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="DefaultContainer" id="_DefaultContainer">

		<td class="attributes"><code>
			 public static
			<code><a href="class-CContainer.html">CContainer</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_DefaultContainer">#</a>
		<code><a href="source-class-CPersistentDocument.html#657-674" title="Go to source code">DefaultContainer</a>( <span><code><a href="class-CDatabase.html">CDatabase</a></code> <var>$theDatabase</var></span> )</code>

		<div class="description short">
			
<h4>Return the object default container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return the object default container</h4>

<p>This static method should be used to get the the class default container
given a database. It expects a <code><a href="class-CDatabase.html">CDatabase</a></code> derived object and should
return a <code><a href="class-CContainer.html">CContainer</a></code> derived object.</p>

<p>If the class does not feature a default container, this method should return
<tt>NULL</tt>.</p>

<p>By default we assume no default containers.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theDatabase</var></dt>
					<dd><code><code><a href="class-CDatabase.html">CDatabase</a></code></code><br>$theDatabase Database object.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-CContainer.html">CContainer</a></code></code><br>The default container.<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="ResolveContainer" id="_ResolveContainer">

		<td class="attributes"><code>
			 public static
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_ResolveContainer">#</a>
		<code><a href="source-class-CPersistentDocument.html#681-775" title="Go to source code">ResolveContainer</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>boolean <var>$doException</var></span> )</code>

		<div class="description short">
			
<h4>Resolve the container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Resolve the container</h4>

<p>This method can be used to get a <code><a href="class-CContainer.html">CContainer</a></code> given an instance of
<code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code>. It will take advantage of the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> methods to obtain the
value.</p>

<p>The first argument of this method is the connection object, the second is a
boolean which determines whether the method should raise an exception if the
container cannot be resolved.</p>

<p>The method will return an exception regardless of the value of the second
parameter if the first parameter is neither a <code><a href="class-CServer.html">CServer</a></code> or <code><a href="class-CDatabase.html">CDatabase</a></code> derived instance.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Connection object.</dd>
					<dt><var>$doException</var></dt>
					<dd><code>boolean</code><br>$doException <tt>TRUE</tt> raise exception.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br><code><a href="class-CContainer.html">CContainer</a></code> or <tt>NULL</tt> if not found.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#_Insert">CPersistentDocument::Insert()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Update">CPersistentDocument::Update()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Replace">CPersistentDocument::Replace()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Restore">CPersistentDocument::Restore()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Delete">CPersistentDocument::Delete()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_ResolveClassContainer">CPersistentDocument::ResolveClassContainer()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="ResolveClassContainer" id="_ResolveClassContainer">

		<td class="attributes"><code>
			 public static
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_ResolveClassContainer">#</a>
		<code><a href="source-class-CPersistentDocument.html#782-836" title="Go to source code">ResolveClassContainer</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>boolean <var>$doException</var></span> )</code>

		<div class="description short">
			
<h4>Resolve class container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Resolve class container</h4>

<p>This method should return the container used by the calling class, regardless
of the provided container. The main difference between this method and <code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code> is that if given a <code><a href="class-CContainer.html">CContainer</a></code> derived instance, this
method will try to resolve its database and will feed it to the <code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code> method.</p>

<p>If the method is unable to resolve the container it will raise an exception,
if the second parameter is <tt>TRUE</tt>, or return <tt>NULL</tt>.</p>

<p>The method will return an exception regardless of the value of the second
parameter if the first parameter is neither a <code><a href="class-CServer.html">CServer</a></code>, a <code><a href="class-CDatabase.html">CDatabase</a></code> or a <code><a href="class-CContainer.html">CContainer</a></code> derived instance.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Connection object.</dd>
					<dt><var>$doException</var></dt>
					<dd><code>boolean</code><br>$doException <tt>TRUE</tt> raise exception.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br><code><a href="class-CContainer.html">CContainer</a></code> or <tt>NULL</tt> if not found.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#_ResolveContainer">CPersistentDocument::ResolveContainer()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_Precommit" id="__Precommit">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Precommit">#</a>
		<code><a href="source-class-CPersistentDocument.html#852-921" title="Go to source code">_Precommit</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>bitfield <var>$theModifiers</var> = kFLAG_DEFAULT </span> )</code>

		<div class="description short">
			
<h4>Prepare the object before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Prepare the object before committing</h4>

<p>This method will be called before the object gets committed, its main duty is
to check whether the object has all the required elements, to set all default
data amd to commit eventual embedded objects.</p>

<p>This method calls three other methods which perform the following
functions:</p>

<ul>
	<li><code><a href="class-CPersistentDocument.html#__PrecommitValidate">CPersistentDocument::_PrecommitValidate()</a></code>: This method's duty is to check if the object
	is fot for being committed.</li>

	<li><code><a href="class-CPersistentDocument.html#__PrecommitRelated">CPersistentDocument::_PrecommitRelated()</a></code>: This method's duty is to check and commit
	eventual embedded or related objects.</li>

	<li><code><a href="class-CPersistentDocument.html#__PrecommitIdentify">CPersistentDocument::_PrecommitIdentify()</a></code>: This method's duty is to fill the object's
	identifiers.</li>
</ul>

<p>These three methods are called in the above order, they take the same
arguments as the current method and do not return a value: errors must raise
exceptions.</p>

<p>When deriving from this class you should overload the above methods and not
this one.</p>

<p>This method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
	</li>
</ul>

<p>If the conditions for committing the object are not met, an exception should
be raised.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>bitfield</code><br>$theModifiers Commit options.</dd>
				</dl></div>



				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__PrecommitValidate">CPersistentDocument::_PrecommitValidate()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__PrecommitRelated">CPersistentDocument::_PrecommitRelated()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__PrecommitIdentify">CPersistentDocument::_PrecommitIdentify()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#_Insert">CPersistentDocument::Insert()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Update">CPersistentDocument::Update()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Replace">CPersistentDocument::Replace()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_Postcommit" id="__Postcommit">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Postcommit">#</a>
		<code><a href="source-class-CPersistentDocument.html#928-992" title="Go to source code">_Postcommit</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>bitfield <var>$theModifiers</var> = kFLAG_DEFAULT </span> )</code>

		<div class="description short">
			
<h4>Prepare the object after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Prepare the object after committing</h4>

<p>This method will be called after the object gets committed, its main duty is
to update the object after it has been committed.</p>

<p>This method calls three other methods which perform the following
functions:</p>

<ul>
	<li><code><a href="class-CPersistentDocument.html#__PostcommitRelated">CPersistentDocument::_PostcommitRelated()</a></code>: This method's duty is to update related
	objects.</li>

	<li><code><a href="class-CPersistentDocument.html#__PostcommitStatus">CPersistentDocument::_PostcommitStatus()</a></code>: This method's duty is to set the object's
	status after the persist operation.</li>

	<li><code><a href="class-CPersistentDocument.html#__PostcommitCleanup">CPersistentDocument::_PostcommitCleanup()</a></code>: This method's duty is to cleanup the object
	after the operation.</li>
</ul>

<p>These three methods are called in the above order, they take the same
arguments as the current method and do not return a value: errors must raise
exceptions.</p>

<p>When deriving from this class you should overload the above methods and not
this one.</p>

<p>This method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
	</li>
</ul>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>bitfield</code><br>$theModifiers Commit options.</dd>
				</dl></div>



				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__PostcommitRelated">CPersistentDocument::_PostcommitRelated()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__PostcommitStatus">CPersistentDocument::_PostcommitStatus()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#__PostcommitCleanup">CPersistentDocument::_PostcommitCleanup()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#_Insert">CPersistentDocument::Insert()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Update">CPersistentDocument::Update()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Replace">CPersistentDocument::Replace()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Restore">CPersistentDocument::Restore()</a></code></code> <br />
						<code><code><a href="class-CPersistentDocument.html#_Delete">CPersistentDocument::Delete()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_PrecommitValidate" id="__PrecommitValidate">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrecommitValidate">#</a>
		<code><a href="source-class-CPersistentDocument.html#1008-1070" title="Go to source code">_PrecommitValidate</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Validate the object before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Validate the object before committing</h4>

<p>This method should check if the object is in the condition for being
inserted, updated, replaced or deleted.</p>

<p>This method is the first one called by <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code>, it should
validate the object elements specific to the current class and let the inherited
method handle the inherited ones.</p>

<p>If the object does not meet the requirements for the desired operation, this
method should raise an exception.</p>

<p>The method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container. This parameter is
	provided as a reference allowing this method to change it.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
		 This parameter is provided as a reference allowing this method to change
		it.</li>
</ul>

<p>In this class we check if the object has the <code><a href="class-CStatusDocument.html#__IsInited">CStatusDocument::_IsInited()</a></code> status.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_WRITE_MASK<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsInited">CStatusDocument::_IsInited()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_PrecommitRelated" id="__PrecommitRelated">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrecommitRelated">#</a>
		<code><a href="source-class-CPersistentDocument.html#1077-1115" title="Go to source code">_PrecommitRelated</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Handle embedded or related objects before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Handle embedded or related objects before committing</h4>

<p>This method should handle embedded or related objects before the current
object gets committed. In general it is here where you would commit embedded
objects and convert them to references.</p>

<p>This method is the second one called by <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code>, it should
handle the object elements specific to the current class and let the inherited
method handle the inherited ones.</p>

<p>If any error occurs during the process, this method should raise an
exception.</p>

<p>The method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container. This parameter is
	provided as a reference allowing this method to change it.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
		 This parameter is provided as a reference allowing this method to change
		it.</li>
</ul>

<p>In this class we do nothing.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_PrecommitIdentify" id="__PrecommitIdentify">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrecommitIdentify">#</a>
		<code><a href="source-class-CPersistentDocument.html#1122-1162" title="Go to source code">_PrecommitIdentify</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Determine the identifiers before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Determine the identifiers before committing</h4>

<p>This method should set the object identifiers before the current object gets
committed. In general it is here where you set sequence numbers or generate
unique identifiers.</p>

<p>This method is the last one called by <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code>, in general, it
should not fail if the first method called by <code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code> has made the
necessary validations. The reason this method is the last in the chain is
because often the object identifier may depend on related or embedded objects
which have been committed in the previous method.</p>

<p>If any error occurs during the process, this method should still raise an
exception.</p>

<p>The method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container. This parameter is
	provided as a reference allowing this method to change it.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
		 This parameter is provided as a reference allowing this method to change
		it.</li>
</ul>

<p>In this class we do nothing.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__Precommit">CPersistentDocument::_Precommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_PostcommitRelated" id="__PostcommitRelated">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PostcommitRelated">#</a>
		<code><a href="source-class-CPersistentDocument.html#1178-1211" title="Go to source code">_PostcommitRelated</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Update related objects after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update related objects after committing</h4>

<p>This method should update eventual related objects after the current object
has been committed. This method is the first one called by <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code>
after the persist operation and the object has not yet updated its status
according to the operation, so this is a good place to make changes before the
status gets reset.</p>

<p>The method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container. This parameter is
	provided as a reference allowing this method to change it.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
		 This parameter is provided as a reference allowing this method to change
		it.</li>
</ul>

<p>In this class we do nothing.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_PostcommitStatus" id="__PostcommitStatus">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PostcommitStatus">#</a>
		<code><a href="source-class-CPersistentDocument.html#1218-1287" title="Go to source code">_PostcommitStatus</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Update the object's status after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update the object's status after committing</h4>

<p>This method should set the object status according to the operation
performed, it is the second method called by <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> after the
persist operation and is called before the <code><a href="class-CPersistentDocument.html#__PostcommitCleanup">CPersistentDocument::_PostcommitCleanup()</a></code> method
that should cleanup after the operation.</p>

<p>In general this method should set or reset the status reflecting the
persistent state of the object.</p>

<p>The method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container. This parameter is
	provided as a reference allowing this method to change it.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
		 This parameter is provided as a reference allowing this method to change
		it.</li>
</ul>

<p>In this class we reset the <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status after committing or
loading the object, set the <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code> status after committing and
resetting it after deleting.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_MASK kFLAG_PERSIST_COMMIT_MASK kFLAG_PERSIST_DELETE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code></code> <br />
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_PostcommitCleanup" id="__PostcommitCleanup">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PostcommitCleanup">#</a>
		<code><a href="source-class-CPersistentDocument.html#1294-1333" title="Go to source code">_PostcommitCleanup</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Cleanup the object after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Cleanup the object after committing</h4>

<p>This method should clean and normalise the object after the operation, it is
the last method called by <code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code> and the last chance to have a
hook into the persist workflow.</p>

<p>Be aware that <code><a href="class-CPersistentDocument.html#__PostcommitStatus">CPersistentDocument::_PostcommitStatus()</a></code> has been called before, so if you
intend to perform operations that may change the object's status, this is not
the place.</p>

<p>The method accepts two parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: The container in which the object is to be
	committed, a server or a database if the <code><a href="class-CPersistentDocument.html#_DefaultDatabase">CPersistentDocument::DefaultDatabase()</a></code> and <code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code> are able to resolve it into a container. This parameter is
	provided as a reference allowing this method to change it.</li>

	<li><tt>$theModifiers</tt>: The commit options provided as a bitfield in which
	the following values are considered:
		<ul>
			<li><tt>kFLAG_PERSIST_INSERT</tt>: Insert operation.</li>

			<li><tt>kFLAG_PERSIST_UPDATE</tt>: Update operation.</li>

			<li><tt>kFLAG_PERSIST_REPLACE</tt>: Replace operation.</li>

			<li><tt>kFLAG_PERSIST_DELETE</tt>: Delete operation.</li>
		</ul>
		 This parameter is provided as a reference allowing this method to change
		it.</li>
</ul>

<p>In this class we reset the <code><a href="class-CStatusDocument.html#__IsDirty">CStatusDocument::_IsDirty()</a></code> status after committing or
loading the object, set the <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code> status after committing and
resetting it after deleting.</p>

<p>In this class we do nothing.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CPersistentDocument.html#__Postcommit">CPersistentDocument::_Postcommit()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CStatusDocument.html#methods">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#__IsCommitted">_IsCommitted()</a>, 
			<a href="class-CStatusDocument.html#__IsDirty">_IsDirty()</a>, 
			<a href="class-CStatusDocument.html#__IsEncoded">_IsEncoded()</a>, 
			<a href="class-CStatusDocument.html#__IsInited">_IsInited()</a>, 
			<a href="class-CStatusDocument.html#__Postset">_Postset()</a>, 
			<a href="class-CStatusDocument.html#__Postunset">_Postunset()</a>, 
			<a href="class-CStatusDocument.html#__Preset">_Preset()</a>, 
			<a href="class-CStatusDocument.html#__Preunset">_Preunset()</a>, 
			<a href="class-CStatusDocument.html#__Ready">_Ready()</a>, 
			<a href="class-CStatusDocument.html#___construct">__construct()</a>, 
			<a href="class-CStatusDocument.html#_offsetSet">offsetSet()</a>, 
			<a href="class-CStatusDocument.html#_offsetUnset">offsetUnset()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CDocument.html#methods">CDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CDocument.html#_array_keys">array_keys()</a>, 
			<a href="class-CDocument.html#_array_values">array_values()</a>, 
			<a href="class-CDocument.html#_offsetGet">offsetGet()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-ArrayObject.html#methods">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#_append">append()</a>, 
			<a href="class-ArrayObject.html#_asort">asort()</a>, 
			<a href="class-ArrayObject.html#_count">count()</a>, 
			<a href="class-ArrayObject.html#_exchangeArray">exchangeArray()</a>, 
			<a href="class-ArrayObject.html#_getArrayCopy">getArrayCopy()</a>, 
			<a href="class-ArrayObject.html#_getFlags">getFlags()</a>, 
			<a href="class-ArrayObject.html#_getIterator">getIterator()</a>, 
			<a href="class-ArrayObject.html#_getIteratorClass">getIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_ksort">ksort()</a>, 
			<a href="class-ArrayObject.html#_natcasesort">natcasesort()</a>, 
			<a href="class-ArrayObject.html#_natsort">natsort()</a>, 
			<a href="class-ArrayObject.html#_offsetExists">offsetExists()</a>, 
			<a href="class-ArrayObject.html#_serialize">serialize()</a>, 
			<a href="class-ArrayObject.html#_setFlags">setFlags()</a>, 
			<a href="class-ArrayObject.html#_setIteratorClass">setIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_uasort">uasort()</a>, 
			<a href="class-ArrayObject.html#_uksort">uksort()</a>, 
			<a href="class-ArrayObject.html#_unserialize">unserialize()</a>
		</code></td>
	</tr>
	</table>








	<table class="summary inherited">
	<caption>Constants inherited from <a href="class-ArrayObject.html#constants">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#ARRAY_AS_PROPS"><b>ARRAY_AS_PROPS</b></a>, 
			<a href="class-ArrayObject.html#STD_PROP_LIST"><b>STD_PROP_LIST</b></a>
		</code></td>
	</tr>
	</table>




	<table class="summary inherited">
	<caption>Properties inherited from <a href="class-CStatusDocument.html#properties">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#$mStatus"><var>$mStatus</var></a>
		</code></td>
	</tr>
	</table>





</div>

	<div id="footer">
		MyWrapper Reference Documentation API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
