<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.7.0" />

	<title>Class CMongoQuery | MyWrapper Reference Documentation</title>

	<script type="text/javascript" src="resources/combined.js?496895167"></script>
	<script type="text/javascript" src="elementlist.js?4206909522"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?1567499433" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active main"><a href="package-MyWrapper.html">MyWrapper<span></span></a>
						<ul>
				<li class="main"><a href="package-MyWrapper.Framework.html">Framework</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Functions.html">Functions</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Ontology.html">Ontology</a>
						</li>
				<li class="active main"><a href="package-MyWrapper.Persistence.html">Persistence</a>
						</li>
							</ul></li>
				<li><a href="package-PHP.html">PHP</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-CMongoContainer.html">CMongoContainer</a></li>
				<li><a href="class-CMongoDatabase.html">CMongoDatabase</a></li>
				<li class="active"><a href="class-CMongoQuery.html">CMongoQuery</a></li>
				<li><a href="class-CMongoServer.html">CMongoServer</a></li>
				<li><a href="class-CPersistentDocument.html">CPersistentDocument</a></li>
				<li><a href="class-CPersistentObject.html">CPersistentObject</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-MyWrapper.Persistence.html" title="Summary of MyWrapper\Persistence"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class CMongoQuery</h1>


	<div class="description">
	
<h3>Mongo query</h3>

<p>This class extends its ancestor to implement a public method that will
convert the current object's query into a query suitable to be submitted to a
Mongo database.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-ArrayObject.html"><span>ArrayObject</span></a>
			
			 implements 
				<a href="class-IteratorAggregate.html"><span>IteratorAggregate</span></a>, 
			
				<a href="class-Traversable.html"><span>Traversable</span></a>, 
			
				<a href="class-ArrayAccess.html"><span>ArrayAccess</span></a>, 
			
				<a href="class-Serializable.html"><span>Serializable</span></a>, 
			
				<a href="class-Countable.html"><span>Countable</span></a>
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CDocument.html"><span>CDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:60px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CStatusDocument.html"><span>CStatusDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:90px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CQuery.html"><span>CQuery</span></a>
			
			
			
		</dd>
		<dd style="padding-left:120px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>CMongoQuery</span></b>			
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		
		<b>Package:</b> <a href="package-MyWrapper.html">MyWrapper</a>\<a href="package-MyWrapper.Persistence.html">Persistence</a><br />

				<b>Author:</b>
				Milko A. Škofič &lt;<a
href="mailto:m.skofic&#64;cgiar.org">m.skofic&#64;<!---->cgiar.org</a>&gt;<br />
		<b>Located at</b> <a href="source-class-CMongoQuery.html#36" title="Go to source code">CMongoQuery.php</a><br />
	</div>


	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="Export" id="_Export">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Export">#</a>
		<code><a href="source-class-CMongoQuery.html#61" title="Go to source code">Export</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theContainer</var></span> )</code>

		<div class="description short">
			
<h4>Export query</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Export query</h4>

<p>We overload the inherited method to generate Mongo specific queries.</p>

<p>The method will first check if the provided container is a <code><a href="class-CMongoContainer.html">CMongoContainer</a></code>, it will then iterate all conditions and feed each to a
protected method, <code><a href="class-CMongoQuery.html#_">CMongoQuery::_ConvertCondition()</a></code>, that will take care of converting
the query elements.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theContainer</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br> Query container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CQuery.html#_">CQuery::Export</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_ValidateCondition" id="__ValidateCondition">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__ValidateCondition">#</a>
		<code><a href="source-class-CMongoQuery.html#116" title="Go to source code">_ValidateCondition</a>( <span>string <var>$theCondition</var></span>, <span>array <var>$theStatements</var></span>, <span>integer <var>$theLevel</var></span> )</code>

		<div class="description short">
			
<h4>Validate condition</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Validate condition</h4>

<p>This method expects a condition as its argument, it will check if it is a
valid condition, then it will validate all condition statements.</p>

<p>In this class we handle queries to Mongo databases, so the depth of the query
conditions cannot go beyond 2 levels.</p>

<p>We overload this method to prevent nesting OR conditions.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theCondition</var></dt>
					<dd><code>string</code><br> Boolean condition.</dd>
					<dt><var>$theStatements</var></dt>
					<dd><code>array</code><br> Statements list.</dd>
					<dt><var>$theLevel</var></dt>
					<dd><code>integer</code><br> [PRIVATE] condition level.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CQuery.html#_">CQuery::_ValidateCondition</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_ConvertCondition" id="__ConvertCondition">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__ConvertCondition">#</a>
		<code><a href="source-class-CMongoQuery.html#164" title="Go to source code">_ConvertCondition</a>( <span>reference <var>&amp; $theQuery</var></span>, <span><code><a href="class-CMongoContainer.html">CMongoContainer</a></code> <var>$theContainer</var></span>, <span>string <var>$theCondition</var></span>, <span>array <var>$theStatements</var></span> )</code>

		<div class="description short">
			
<h4>Convert condition</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Convert condition</h4>

<p>This method is provided by the <code><a href="class-CMongoQuery.html#_">CMongoQuery::Export()</a></code> method a condition to convert
in Mongo format. The method will iterate all statements in the condition and
feed them to the</p>

<p>The method is called by the <code><a href="class-CMongoQuery.html#_">CMongoQuery::Export()</a></code> method and takes care of
organising the <code><a href="class-CMongoQuery.html#_">CMongoQuery::_ConvertStatement()</a></code> method that will convert them.</p>

<p>The parameters to this method are:</p>

<ul>
	<li><tt>&amp;$theQuery</tt>: Reference to an array that will receive the
	converted condition.</li>

	<li><tt>$theContainer</tt>: Data container, must be derived from <code><a href="class-CMongoContainer.html">CMongoContainer</a></code>.</li>

	<li><tt>$theCondition</tt>: Boolean condition code.</li>

	<li><tt>$theStatements</tt>: List of condition statements.</li>
</ul>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theQuery</var></dt>
					<dd><code>reference</code><br>&amp;$theQuery Receives converted query.</dd>
					<dt><var>$theContainer</var></dt>
					<dd><code><code><a href="class-CMongoContainer.html">CMongoContainer</a></code></code><br> Query container.</dd>
					<dt><var>$theCondition</var></dt>
					<dd><code>string</code><br> Boolean condition.</dd>
					<dt><var>$theStatements</var></dt>
					<dd><code>array</code><br> Statements list.</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_ConvertStatement" id="__ConvertStatement">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__ConvertStatement">#</a>
		<code><a href="source-class-CMongoQuery.html#247" title="Go to source code">_ConvertStatement</a>( <span>reference <var>&amp; $theQuery</var></span>, <span><code><a href="class-CMongoContainer.html">CMongoContainer</a></code> <var>$theContainer</var></span>, <span>string <var>$theCondition</var></span>, <span>array <var>$theStatement</var></span> )</code>

		<div class="description short">
			
<h4>Convert statement</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Convert statement</h4>

<p>This method will convert the statement to Mongo format.</p>

<p>The parameters to this method are:</p>

<ul>
	<li><tt>&amp;$theQuery</tt>: Reference to an array that will receive the
	converted statement.</li>

	<li><tt>$theContainer</tt>: Data container, must be derived from <code><a href="class-CMongoContainer.html">CMongoContainer</a></code> and we assume this check has been done by the caller.</li>

	<li><tt>$theCondition</tt>: Boolean condition code.</li>

	<li><tt>$theStatement</tt>: Statement.</li>
</ul>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theQuery</var></dt>
					<dd><code>reference</code><br>&amp;$theQuery Receives converted statement.</dd>
					<dt><var>$theContainer</var></dt>
					<dd><code><code><a href="class-CMongoContainer.html">CMongoContainer</a></code></code><br> Query container.</dd>
					<dt><var>$theCondition</var></dt>
					<dd><code>string</code><br> Boolean condition.</dd>
					<dt><var>$theStatement</var></dt>
					<dd><code>array</code><br> Statement.</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="_OrderRange" id="__OrderRange">

		<td class="attributes"><code>
			 protected 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__OrderRange">#</a>
		<code><a href="source-class-CMongoQuery.html#758" title="Go to source code">_OrderRange</a>( <span>mixed <var>$theRange</var></span>, <span><code><a href="class-CMongoContainer.html">CMongoContainer</a></code> <var>$theContainer</var></span>, <span>string <var>$theType</var></span> )</code>

		<div class="description short">
			
<h4>Order range elements</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Order range elements</h4>

<p>This method will order the provided range elements, the method accepts an
array of two elements which represent the range bounds and will return an array
with the two provided elements sorted.</p>

<p>The method accepts three parameters:</p>

<ul>
	<li><tt>$theRange</tt>: An array containing two elements representing the range
	bounds.</li>

	<li><tt>$theContainer</tt>: The <code><a href="class-CMongoContainer.html">CMongoContainer</a></code> on which the query will
	be executed.</li>

	<li><tt>$theType</tt>: The data type of the range elements.</li>
</ul>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theRange</var></dt>
					<dd><code>mixed</code><br> Range elements.</dd>
					<dt><var>$theContainer</var></dt>
					<dd><code><code><a href="class-CMongoContainer.html">CMongoContainer</a></code></code><br> Query container.</dd>
					<dt><var>$theType</var></dt>
					<dd><code>string</code><br> Elements data type.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CQuery.html#methods">CQuery</a></caption>
	<tr>
		<td><code>
			<a href="class-CQuery.html#_">AppendStatement()</a>, 
			<a href="class-CQuery.html#_">Validate()</a>, 
			<a href="class-CQuery.html#_">_AppendStatement()</a>, 
			<a href="class-CQuery.html#_">_Ready()</a>, 
			<a href="class-CQuery.html#_">_ValidateStatement()</a>, 
			<a href="class-CQuery.html#_">__construct()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CStatusDocument.html#methods">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#_">_IsCommitted()</a>, 
			<a href="class-CStatusDocument.html#_">_IsDirty()</a>, 
			<a href="class-CStatusDocument.html#_">_IsEncoded()</a>, 
			<a href="class-CStatusDocument.html#_">_IsInited()</a>, 
			<a href="class-CStatusDocument.html#_">_Postset()</a>, 
			<a href="class-CStatusDocument.html#_">_Postunset()</a>, 
			<a href="class-CStatusDocument.html#_">_Preset()</a>, 
			<a href="class-CStatusDocument.html#_">_Preunset()</a>, 
			<a href="class-CStatusDocument.html#_">offsetSet()</a>, 
			<a href="class-CStatusDocument.html#_">offsetUnset()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CDocument.html#methods">CDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CDocument.html#_">array_keys()</a>, 
			<a href="class-CDocument.html#_">array_values()</a>, 
			<a href="class-CDocument.html#_">offsetGet()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-ArrayObject.html#methods">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#_">append()</a>, 
			<a href="class-ArrayObject.html#_">asort()</a>, 
			<a href="class-ArrayObject.html#_">count()</a>, 
			<a href="class-ArrayObject.html#_">exchangeArray()</a>, 
			<a href="class-ArrayObject.html#_">getArrayCopy()</a>, 
			<a href="class-ArrayObject.html#_">getFlags()</a>, 
			<a href="class-ArrayObject.html#_">getIterator()</a>, 
			<a href="class-ArrayObject.html#_">getIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_">ksort()</a>, 
			<a href="class-ArrayObject.html#_">natcasesort()</a>, 
			<a href="class-ArrayObject.html#_">natsort()</a>, 
			<a href="class-ArrayObject.html#_">offsetExists()</a>, 
			<a href="class-ArrayObject.html#_">serialize()</a>, 
			<a href="class-ArrayObject.html#_">setFlags()</a>, 
			<a href="class-ArrayObject.html#_">setIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_">uasort()</a>, 
			<a href="class-ArrayObject.html#_">uksort()</a>, 
			<a href="class-ArrayObject.html#_">unserialize()</a>
		</code></td>
	</tr>
	</table>




	<table class="summary inherited">
	<caption>Constants inherited from <a href="class-ArrayObject.html#constants">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#ARRAY_AS_PROPS"><b>ARRAY_AS_PROPS</b></a>, 
			<a href="class-ArrayObject.html#STD_PROP_LIST"><b>STD_PROP_LIST</b></a>
		</code></td>
	</tr>
	</table>



	<table class="summary inherited">
	<caption>Properties inherited from <a href="class-CStatusDocument.html#properties">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#$mStatus"><var>$mStatus</var></a>
		</code></td>
	</tr>
	</table>


</div>

	<div id="footer">
		MyWrapper Reference Documentation API documentation generated by <a href="http://apigen.org">ApiGen 2.7.0</a>
	</div>
</div>
</div>
</body>
</html>
