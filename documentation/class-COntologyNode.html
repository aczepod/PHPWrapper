<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class COntologyNode | MyWrapper Reference Documentation</title>

	<script type="text/javascript" src="resources/combined.js?3994123307"></script>
	<script type="text/javascript" src="elementlist.js?3428385880"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active main"><a href="package-MyWrapper.html">MyWrapper<span></span></a>
						<ul>
				<li class="main"><a href="package-MyWrapper.Framework.html">Framework</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Functions.html">Functions</a>
						</li>
				<li class="active main"><a href="package-MyWrapper.Ontology.html">Ontology</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Persistence.html">Persistence</a>
						</li>
							</ul></li>
				<li><a href="package-PHP.html">PHP</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-COntology.html">COntology</a></li>
				<li><a href="class-COntologyEdge.html">COntologyEdge</a></li>
				<li class="active"><a href="class-COntologyNode.html">COntologyNode</a></li>
				<li><a href="class-COntologyTag.html">COntologyTag</a></li>
				<li><a href="class-COntologyTerm.html">COntologyTerm</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-MyWrapper.Ontology.html" title="Summary of MyWrapper\Ontology"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class COntologyNode</h1>


	<div class="description">
	
<h3>Ontology node object ancestor</h3>

<p>This class extends its ancestor, <code><a href="class-CNode.html">CNode</a></code>, by asserting the <code><a href="class-CNode.html#_Term">CNode::Term()</a></code> to be an instance of <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> and by managing the kOFFSET_REFS_NODE offset of the related <code><a href="class-CNode.html#_Term">CNode::Term()</a></code>.</p>

<p>The class does not handle global identifiers and objects cannot be uniquely
identified by its properties or attributes, it is the duty of the hosting
container to provide the kOFFSET_NID identifier, In this class we use
sequences, <code><a href="class-CContainer.html#_NextSequence">CContainer::NextSequence()</a></code>, from a default container named
after the default kCONTAINER_SEQUENCE_NAME tag in the same database,
this is to make referencing nodes easier and to be compatible with most graph
databases.</p>

<p>In this class, the term, kOFFSET_TERM, is a reference to an instance
of <code><a href="class-COntologyTerm.html">COntologyTerm</a></code>, meaning that the offset will contain the native
identifier of the term. The value may be provided as an uncommitted term object,
in that case the term will be committed before the current node is
committed.</p>

<p>Once the node has been committed, it will not be possible to modify the term,
kOFFSET_TERM.</p>

<p>When inserting a new node, the class will also make sure that the referenced
term gets a reference to the current node in its kOFFSET_REFS_NODE
offset, this means that once a node is committed, one cannot change its term
reference.</p>

<p>The class features an offset, kOFFSET_REFS_TAG, which represents the
list of tags that reference the current node. This offset is a set of tag
identifiers implemented as an array. The offset definition is borrowed from the
<code><a href="class-COntologyTerm.html">COntologyTerm</a></code> class, which is required by this class because of its
kOFFSET_TERM offset. This offset is managed by the tag class, this class
locks the offset.</p>

<p>This class prevents updating the full object once it has been inserted for
the first time. This behaviour is necessary because nodes are referenced by many
other objects, so updating a full node object is risky, since it may have been
updated elsewhere: for this reason the <code><a href="class-COntologyNode.html#_Update">COntologyNode::Update()</a></code> and <code><a href="class-COntologyNode.html#_Replace">COntologyNode::Replace()</a></code>
methods will raise an exception.</p>

<p>The class implements the static method, <code><a href="class-COntologyNode.html#_DefaultContainer">COntologyNode::DefaultContainer()</a></code>, it will
use the kCONTAINER_NODE_NAME constant. Note that when passing <code><a href="class-CConnection.html">CConnection</a></code> based objects to the persisting methods of this class, you should
provide preferably Database instances, since this class may have to commit
terms.</p>

<p>The class features member accessor methods for the default offsets:</p>

<ul>
	<li><code><a href="class-COntologyNode.html#_TagRefs">COntologyNode::TagRefs()</a></code>: This method returns the node's tag references, kOFFSET_REFS_TAG.</li>

	<li><code><a href="class-COntologyNode.html#_LoadTerm">COntologyNode::LoadTerm()</a></code>: This method will return the referenced term object.</li>
</ul>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-ArrayObject.html"><span>ArrayObject</span></a>
			
			 implements 
				<a href="class-IteratorAggregate.html"><span>IteratorAggregate</span></a>, 
			
				<a href="class-Traversable.html"><span>Traversable</span></a>, 
			
				<a href="class-ArrayAccess.html"><span>ArrayAccess</span></a>, 
			
				<a href="class-Serializable.html"><span>Serializable</span></a>, 
			
				<a href="class-Countable.html"><span>Countable</span></a>
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CDocument.html"><span>CDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:60px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CStatusDocument.html"><span>CStatusDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:90px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CPersistentDocument.html"><span>CPersistentDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:120px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CPersistentObject.html"><span>CPersistentObject</span></a>
			
			
			
		</dd>
		<dd style="padding-left:150px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CNode.html"><span>CNode</span></a>
			
			
			
		</dd>
		<dd style="padding-left:180px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>COntologyNode</span></b>			
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		
		<b>Package:</b> <a href="package-MyWrapper.html">MyWrapper</a>\<a href="package-MyWrapper.Ontology.html">Ontology</a><br />

				<b>Author:</b>
				Milko A. Škofič &lt;<a
href="mailto:m.skofic&#64;cgiar.org">m.skofic&#64;<!---->cgiar.org</a>&gt;<br />
		<b>Located at</b> <a href="source-class-COntologyNode.html#43-1291" title="Go to source code">COntologyNode.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__toString" id="___toString">

		<td class="attributes"><code>
			 public 
			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___toString">#</a>
		<code><a href="source-class-COntologyNode.html#121-145" title="Go to source code">__toString</a>( )</code>

		<div class="description short">
			
<h4>Return object name</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return object name</h4>

<p>This method should return the current object's name which should represent
the unique identifier of the object.</p>

<p>By default we return the string representation of the term, kOFFSET_TERM.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>The connection name.<br />
				</div>



				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CNode.html#___toString">CNode::__toString()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Type" id="_Type">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Type">#</a>
		<code><a href="source-class-COntologyNode.html#161-304" title="Go to source code">Type</a>( <span>mixed <var>$theValue</var> = <span class="php-keyword1">NULL</span></span>, <span>boolean <var>$theOperation</var> = <span class="php-keyword1">NULL</span></span>, <span>boolean <var>$getOld</var> = <span class="php-keyword1">FALSE</span> </span> )</code>

		<div class="description short">
			
<h4>Manage node type set</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Manage node type set</h4>

<p>In this class we overload the parent method to assert the kind of elements
that can be set in the offset. The offset accepts two types of elements:</p>

<ul>
	<li><i>Data type</i>: The set accepts one of the following primary data types:
		<ul>
			<li><i>kTYPE_STRING</i>: String, we assume in UTF8 character set.</li>

			<li><i>kTYPE_INT32</i>: 32 bit signed integer.</li>

			<li><i>kTYPE_INT64</i>: 64 bit signed integer.</li>

			<li><i>kTYPE_FLOAT</i>: Floating point number.</li>

			<li><i>kTYPE_BOOLEAN</i>: An <tt>on</tt>/<tt>off</tt> switch.</li>

			<li><i>kTYPE_BINARY</i>: A binary string.</li>

			<li><i>kTYPE_DATE</i>: A date.</li>

			<li><i>kTYPE_TIME</i>: A date and time.</li>

			<li><i>kTYPE_STAMP</i>: A native timestamp.</li>

			<li><i>kTYPE_STRUCT</i>: A structure container.</li>

			<li><i>kTYPE_ENUM</i>: Enumerated scalar, this data type resolves by
			default to a string and indicates that the node refers to a controlled
			vocabulary scalar whose elements will be found related to the current node.</li>

			<li><i>kTYPE_ENUM_SET</i>: Enumerated set, this data type resolves by
			default to a list of string elements and indicates that the node refers to an
			enumerated set whose elements will be found related to the current node.</li>
		</ul>
		 Only one of the above may be present in the list, when adding a new element, if
		the offset already contains a data type, this will be replaced by the new
		one.</li>

	<li><i>Cardinality</i>: The set accepts one or more cardinality indicators from
	the following set:
		<ul>
			<li><i>kTYPE_CARD_REQUIRED</i>: Required, the element referred by the
			current node is required and cannot be omitted; if this tag is missing, it means
			that the element is optional.</li>

			<li><i>kTYPE_CARD_ARRAY</i>: Array, the element referred by the current
			node is a list in which each element is of the data type indicated by the
			previous set; if this tag is missing, it means that the element is a
			scalar.</li>
		</ul>
	</li>
</ul>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theValue</var></dt>
					<dd><code>mixed</code><br>$theValue Type or operation.</dd>
					<dt><var>$theOperation</var></dt>
					<dd><code>boolean</code><br>$getOld <tt>TRUE</tt> get old value.</dd>
					<dt><var>$getOld</var></dt>
					<dd><code>boolean</code><br>$getOld TRUE get old value.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br><i>New</i> or <i>old</i> type.<br />
				</div>



				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CNode.html#_Type">CNode::Type()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="TagRefs" id="_TagRefs">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_TagRefs">#</a>
		<code><a href="source-class-COntologyNode.html#311-337" title="Go to source code">TagRefs</a>( )</code>

		<div class="description short">
			
<h4>Manage tag references</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Manage tag references</h4>

<p>The <i>tag references</i>, kOFFSET_REFS_TAG, holds a list of
identifiers of tags that reference the node.</p>

<p>The method is read-only, because this value must be managed externally.</p>

<p>The kOFFSET_REFS_TAG offset tag is defined by the <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> class which is included in this class by default.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>Tags reference list.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kOFFSET_REFS_TAG<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="EdgeRefs" id="_EdgeRefs">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_EdgeRefs">#</a>
		<code><a href="source-class-COntologyNode.html#344-367" title="Go to source code">EdgeRefs</a>( )</code>

		<div class="description short">
			
<h4>Manage edge references</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Manage edge references</h4>

<p>The <i>edge references</i>, kOFFSET_REFS_EDGE, holds a list of
identifiers of edges that reference the node.</p>

<p>The method is read-only, because this value must be managed externally.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>Edge reference list.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kOFFSET_REFS_EDGE<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="LoadTerm" id="_LoadTerm">

		<td class="attributes"><code>
			 public 
			<code><a href="class-COntologyTerm.html">COntologyTerm</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_LoadTerm">#</a>
		<code><a href="source-class-COntologyNode.html#383-451" title="Go to source code">LoadTerm</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>boolean <var>$doReload</var> = <span class="php-keyword1">FALSE</span> </span> )</code>

		<div class="description short">
			
<h4>Load term object</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Load term object</h4>

<p>This method will return the current term object: if the term is not set, the
method will return <tt>NULL</tt>; if the term cannot be found, the method will
raise an exception.</p>

<p>The object will also be loaded in a data member that can function as a
cache.</p>

<p>The method features two parameters: the first refers to the container in
which the term is stored, the second is a boolean flag that determines whether
the object is to be read, or if the cached copy can be used.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$doReload</var></dt>
					<dd><code>boolean</code><br>$doReload Reload if <tt>TRUE</tt>.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-COntologyTerm.html">COntologyTerm</a></code></code><br>Term object or <tt>NULL</tt>.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kOFFSET_TERM<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentObject.html#_NewObject">CPersistentObject::NewObject()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-COntologyNode.html#__PrecommitRelated">COntologyNode::_PrecommitRelated()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="RelateTo" id="_RelateTo">

		<td class="attributes"><code>
			 public 
			<code><a href="class-COntologyEdge.html">COntologyEdge</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_RelateTo">#</a>
		<code><a href="source-class-COntologyNode.html#467-510" title="Go to source code">RelateTo</a>( <span>mixed <var>$thePredicate</var></span>, <span>mixed <var>$theObject</var></span> )</code>

		<div class="description short">
			
<h4>Relate to node</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Relate to node</h4>

<p>This method will relate the current node to another and return a <code><a href="class-COntologyEdge.html">COntologyEdge</a></code> object which represents a directed graph edge where the current
node represents the subject of the relationship.</p>

<p>The predicate and object vertex can be provided both as objects or as object
identifiers.</p>

<p>Note that the edge will not be committed, it is the responsibility of the
caller to do so.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$thePredicate</var></dt>
					<dd><code>mixed</code><br>$thePredicate Predicate term object or reference.</dd>
					<dt><var>$theObject</var></dt>
					<dd><code>mixed</code><br>$theObject Object node object or reference.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-COntologyEdge.html">COntologyEdge</a></code></code><br>Edge object.<br />
				</div>



				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CNode.html#_RelateTo">CNode::RelateTo()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Update" id="_Update">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Update">#</a>
		<code><a href="source-class-COntologyNode.html#526-556" title="Go to source code">Update</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Update the object in a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update the object in a container</h4>

<p>We overload this method to raise an exception: objects of this class can only
be inserted, after this one can only modify their attributes using the
modification interface provided by container objects.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#_Update">CPersistentDocument::Update()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Replace" id="_Replace">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Replace">#</a>
		<code><a href="source-class-COntologyNode.html#563-603" title="Go to source code">Replace</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Replace the object into a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Replace the object into a container</h4>

<p>We overload this method to raise an exception: objects of this class can only
be inserted, after this one can only modify their attributes using the
modification interface provided by container objects.</p>

<p>In this class we prevent replacing a committed object and allow inserting a
non committed object.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>The object's native identifier.<br />
				</div>



				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#_Replace">CPersistentDocument::Replace()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="DefaultContainer" id="_DefaultContainer">

		<td class="attributes"><code>
			 public static
			<code><a href="class-CContainer.html">CContainer</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_DefaultContainer">#</a>
		<code><a href="source-class-COntologyNode.html#619-636" title="Go to source code">DefaultContainer</a>( <span><code><a href="class-CDatabase.html">CDatabase</a></code> <var>$theDatabase</var></span> )</code>

		<div class="description short">
			
<h4>Return the nodes container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return the nodes container</h4>

<p>The container will be created or fetched from the provided database using the
kCONTAINER_NODE_NAME name.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theDatabase</var></dt>
					<dd><code><code><a href="class-CDatabase.html">CDatabase</a></code></code><br>$theDatabase Database object.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-CContainer.html">CContainer</a></code></code><br>The nodes container.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kCONTAINER_NODE_NAME<br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Resolve" id="_Resolve">

		<td class="attributes"><code>
			 public static
			<code><a href="class-COntologyTerm.html">COntologyTerm</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Resolve">#</a>
		<code><a href="source-class-COntologyNode.html#652-825" title="Go to source code">Resolve</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>mixed <var>$theIdentifier</var></span>, <span>boolean <var>$doThrow</var> = <span class="php-keyword1">FALSE</span> </span> )</code>

		<div class="description short">
			
<h4>Resolve a node</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Resolve a node</h4>

<p>This method can be used to retrieve an existing node by identifier, or
retrieve all nodes matching a term.</p>

<p>The method accepts the following parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: This parameter represents the connection from which
	the nodes container must be resolved. If this parameter cannot be correctly
	determined, the method will raise an exception.</li>

	<li><tt>$theIdentifier</tt>: This parameter represents either the node
	identifier or the term reference, depending on its type:
		<ul>
			<li><tt>integer</tt>: In this case the method assumes that the parameter
			represents the node identifier: it will attempt to retrieve the node, if it is
			not found, the method will return <tt>NULL</tt>.</li>

			<li><tt><code><a href="class-COntologyTerm.html">COntologyTerm</a></code></tt>: In this case the method locate all nodes
			that refer to the provided term. If the term is not <code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code>, the
			method will return <tt>NULL</tt>.</li>

			<li><i>other</i>: Any other type will be interpreted either the term's native
			identifier, or as the term's global identifier: the method will return all nodes
			that refer to that term.</li>
		</ul>
	</li>

	<li><tt>$doThrow</tt>: If <tt>TRUE</tt>, any failure to resolve the node will
	raise an exception.</li>
</ul>

<p>The method will return the found node(s), <tt>NULL</tt> if not found, or
raise an exception if the last parameter is <tt>TRUE</tt>.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$theIdentifier</var></dt>
					<dd><code>mixed</code><br>$theIdentifier Node identifier or term reference.</dd>
					<dt><var>$doThrow</var></dt>
					<dd><code>boolean</code><br>$doThrow If <tt>TRUE</tt> raise an exception.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-COntologyTerm.html">COntologyTerm</a></code></code><br>Found node or <tt>NULL</tt>.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-COntology.html#_ResolveNode">COntology::ResolveNode()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="_Preset" id="__Preset">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Preset">#</a>
		<code><a href="source-class-COntologyNode.html#841-939" title="Go to source code">_Preset</a>( <span>reference <var>&amp; $theOffset</var></span>, <span>reference <var>&amp; $theValue</var></span> )</code>

		<div class="description short">
			
<h4>Handle offset before setting it</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Handle offset before setting it</h4>

<p>In this class we handle the term offset, if provided as an object we leave it
unchanged only if not yet committed, if not, we convert it to its native
identifier. We also ensure the provided term object to be an instance of <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> by asserting <code><a href="class-CDocument.html">CDocument</a></code> descendants to be of that
class.</p>

<p>This method will lock the kOFFSET_REFS_TAG offset from any
modification.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theOffset</var></dt>
					<dd><code>reference</code><br>&amp;$theOffset Offset.</dd>
					<dt><var>$theValue</var></dt>
					<dd><code>reference</code><br>&amp;$theValue Value to set at offset.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kOFFSET_TERM kOFFSET_REFS_TAG<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
						<code><code><a href="class-CPersistentObject.html#__AssertClass">CPersistentObject::_AssertClass()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CNode.html#__Preset">CNode::_Preset()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_Preunset" id="__Preunset">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Preunset">#</a>
		<code><a href="source-class-COntologyNode.html#946-987" title="Go to source code">_Preunset</a>( <span>reference <var>&amp; $theOffset</var></span> )</code>

		<div class="description short">
			
<h4>Handle offset before unsetting it</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Handle offset before unsetting it</h4>

<p>In this class we prevent the modification of the kOFFSET_TERM offset
if the object is committed and of the kOFFSET_REFS_TAG offset in all
cases.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theOffset</var></dt>
					<dd><code>reference</code><br>&amp;$theOffset Offset.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kOFFSET_REFS_TAG kOFFSET_TERM<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentObject.html#__Preunset">CPersistentObject::_Preunset()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PrecommitRelated" id="__PrecommitRelated">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrecommitRelated">#</a>
		<code><a href="source-class-COntologyNode.html#1003-1067" title="Go to source code">_PrecommitRelated</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Handle embedded or related objects before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Handle embedded or related objects before committing</h4>

<p>In this class we commit the eventual term provided as an uncommitted object
and replace the offset with the term's native identifier, or load the term if
provided as an identifier.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>See</h4>
				<div class="list">
						kOFFSET_TERM<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-COntologyNode.html#_LoadTerm">COntologyNode::LoadTerm()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentObject.html#__PrecommitRelated">CPersistentObject::_PrecommitRelated()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PrecommitIdentify" id="__PrecommitIdentify">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrecommitIdentify">#</a>
		<code><a href="source-class-COntologyNode.html#1074-1119" title="Go to source code">_PrecommitIdentify</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Determine the identifiers before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Determine the identifiers before committing</h4>

<p>Objects of this class are identified by a sequence number tagged kSEQUENCE_KEY_NODE, this method will set the native identifier, kOFFSET_NID, with this value.</p>

<p>The parent method will then be called, which will ignore the global
identifier, kOFFSET_GID, since the <code><a href="class-CPersistentObject.html#__index">CPersistentObject::_index()</a></code> method returns
<tt>NULL</tt> and also ignore the native identifier, kOFFSET_NID, since
it will have been set here.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>See</h4>
				<div class="list">
						kOFFSET_NID kSEQUENCE_KEY_NODE<br />
						kFLAG_PERSIST_INSERT kFLAG_PERSIST_REPLACE<br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentObject.html#__PrecommitIdentify">CPersistentObject::_PrecommitIdentify()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PostcommitRelated" id="__PostcommitRelated">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PostcommitRelated">#</a>
		<code><a href="source-class-COntologyNode.html#1135-1179" title="Go to source code">_PostcommitRelated</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Update related objects after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update related objects after committing</h4>

<p>In this class we add the current node's identifier to the list of node
references, kOFFSET_REFS_NODE, in the related term when inserting; we
remove the element when deleting.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_INSERT kFLAG_PERSIST_REPLACE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
						<code><code><a href="class-COntologyNode.html#__ReferenceInTerm">COntologyNode::_ReferenceInTerm()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#__PostcommitRelated">CPersistentDocument::_PostcommitRelated()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PostcommitCleanup" id="__PostcommitCleanup">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PostcommitCleanup">#</a>
		<code><a href="source-class-COntologyNode.html#1186-1210" title="Go to source code">_PostcommitCleanup</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Cleanup the object after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Cleanup the object after committing</h4>

<p>In this class we reset the term object cache, we set the data member to
<tt>NULL</tt> so that next time one wants to retrieve the term object, it will
have to be refreshed and its references actualised.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>




				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#__PostcommitCleanup">CPersistentDocument::_PostcommitCleanup()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_ReferenceInTerm" id="__ReferenceInTerm">

		<td class="attributes"><code>
			 protected 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__ReferenceInTerm">#</a>
		<code><a href="source-class-COntologyNode.html#1226-1287" title="Go to source code">_ReferenceInTerm</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>boolean <var>$doAdd</var></span> )</code>

		<div class="description short">
			
<h4>Add node reference to term</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Add node reference to term</h4>

<p>This method can be used to add or remove the current node's reference from
the referenced term, kOFFSET_REFS_NODE. This method should be used
whenever committing a new node or deleting one: it will add the current node's
native identifier to the set of node references of the node's term when
committing a new node; it will remove it when deleting the node.</p>

<p>The last parameter is a boolean: if <tt>TRUE</tt> the method will add to the
set; if <tt>FALSE</tt>, it will remove from the set.</p>

<p>The method will return <tt>TRUE</tt> if the operation affected at least one
object, <tt>FALSE</tt> if not, <tt>NULL</tt> if the term is not set and raise an
exception if the operation failed.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$doAdd</var></dt>
					<dd><code>boolean</code><br>$doAdd <tt>TRUE</tt> add reference.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br><tt>TRUE</tt> operation affected at least one object.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kOFFSET_TERM kOFFSET_REFS_NODE<br />
						kFLAG_PERSIST_MODIFY kFLAG_MODIFY_ADDSET kFLAG_MODIFY_PULL<br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-COntologyNode.html#__PostcommitRelated">COntologyNode::_PostcommitRelated()</a></code></code> <br />
				</div>


		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CNode.html#methods">CNode</a></caption>
	<tr>
		<td><code>
			<a href="class-CNode.html#_Kind">Kind()</a>, 
			<a href="class-CNode.html#_Term">Term()</a>, 
			<a href="class-CNode.html#__Ready">_Ready()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CPersistentObject.html#methods">CPersistentObject</a></caption>
	<tr>
		<td><code>
			<a href="class-CPersistentObject.html#_CLassName">CLassName()</a>, 
			<a href="class-CPersistentObject.html#_DocumentObject">DocumentObject()</a>, 
			<a href="class-CPersistentObject.html#_GID">GID()</a>, 
			<a href="class-CPersistentObject.html#_NewObject">NewObject()</a>, 
			<a href="class-CPersistentObject.html#__AssertClass">_AssertClass()</a>, 
			<a href="class-CPersistentObject.html#__PrecommitValidate">_PrecommitValidate()</a>, 
			<a href="class-CPersistentObject.html#__id">_id()</a>, 
			<a href="class-CPersistentObject.html#__index">_index()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CPersistentDocument.html#methods">CPersistentDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CPersistentDocument.html#_DefaultDatabase">DefaultDatabase()</a>, 
			<a href="class-CPersistentDocument.html#_Delete">Delete()</a>, 
			<a href="class-CPersistentDocument.html#_Insert">Insert()</a>, 
			<a href="class-CPersistentDocument.html#_NID">NID()</a>, 
			<a href="class-CPersistentDocument.html#_ResolveClassContainer">ResolveClassContainer()</a>, 
			<a href="class-CPersistentDocument.html#_ResolveContainer">ResolveContainer()</a>, 
			<a href="class-CPersistentDocument.html#_Restore">Restore()</a>, 
			<a href="class-CPersistentDocument.html#__Postcommit">_Postcommit()</a>, 
			<a href="class-CPersistentDocument.html#__PostcommitStatus">_PostcommitStatus()</a>, 
			<a href="class-CPersistentDocument.html#__Precommit">_Precommit()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CStatusDocument.html#methods">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#__IsCommitted">_IsCommitted()</a>, 
			<a href="class-CStatusDocument.html#__IsDirty">_IsDirty()</a>, 
			<a href="class-CStatusDocument.html#__IsEncoded">_IsEncoded()</a>, 
			<a href="class-CStatusDocument.html#__IsInited">_IsInited()</a>, 
			<a href="class-CStatusDocument.html#__Postset">_Postset()</a>, 
			<a href="class-CStatusDocument.html#__Postunset">_Postunset()</a>, 
			<a href="class-CStatusDocument.html#___construct">__construct()</a>, 
			<a href="class-CStatusDocument.html#_offsetSet">offsetSet()</a>, 
			<a href="class-CStatusDocument.html#_offsetUnset">offsetUnset()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CDocument.html#methods">CDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CDocument.html#_array_keys">array_keys()</a>, 
			<a href="class-CDocument.html#_array_values">array_values()</a>, 
			<a href="class-CDocument.html#_offsetGet">offsetGet()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-ArrayObject.html#methods">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#_append">append()</a>, 
			<a href="class-ArrayObject.html#_asort">asort()</a>, 
			<a href="class-ArrayObject.html#_count">count()</a>, 
			<a href="class-ArrayObject.html#_exchangeArray">exchangeArray()</a>, 
			<a href="class-ArrayObject.html#_getArrayCopy">getArrayCopy()</a>, 
			<a href="class-ArrayObject.html#_getFlags">getFlags()</a>, 
			<a href="class-ArrayObject.html#_getIterator">getIterator()</a>, 
			<a href="class-ArrayObject.html#_getIteratorClass">getIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_ksort">ksort()</a>, 
			<a href="class-ArrayObject.html#_natcasesort">natcasesort()</a>, 
			<a href="class-ArrayObject.html#_natsort">natsort()</a>, 
			<a href="class-ArrayObject.html#_offsetExists">offsetExists()</a>, 
			<a href="class-ArrayObject.html#_serialize">serialize()</a>, 
			<a href="class-ArrayObject.html#_setFlags">setFlags()</a>, 
			<a href="class-ArrayObject.html#_setIteratorClass">setIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_uasort">uasort()</a>, 
			<a href="class-ArrayObject.html#_uksort">uksort()</a>, 
			<a href="class-ArrayObject.html#_unserialize">unserialize()</a>
		</code></td>
	</tr>
	</table>








	<table class="summary inherited">
	<caption>Constants inherited from <a href="class-ArrayObject.html#constants">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#ARRAY_AS_PROPS"><b>ARRAY_AS_PROPS</b></a>, 
			<a href="class-ArrayObject.html#STD_PROP_LIST"><b>STD_PROP_LIST</b></a>
		</code></td>
	</tr>
	</table>



	<table class="summary" id="properties">
	<caption>Properties summary</caption>
	<tr data-order="mTerm" id="$mTerm">
		<td class="attributes"><code>
			protected  
			<code><a href="class-COntologyTerm.html">COntologyTerm</a></code>
		</code></td>

		<td class="name">
				<a href="source-class-COntologyNode.html#98-105" title="Go to source code"><var>$mTerm</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">NULL</span></code></td>
		<td class="description"><div>
			<a href="#$mTerm" class="anchor">#</a>

			<div class="description short">
				
<p><b>Term object</b></p>

			</div>

			<div class="description detailed hidden">
				
<p><b>Term object</b></p>

<p>This data member holds the eventual term object when requested.</p>


			</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Properties inherited from <a href="class-CStatusDocument.html#properties">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#$mStatus"><var>$mStatus</var></a>
		</code></td>
	</tr>
	</table>





</div>

	<div id="footer">
		MyWrapper Reference Documentation API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
