<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class COntologyTag | MyWrapper Reference Documentation</title>

	<script type="text/javascript" src="resources/combined.js?3680114562"></script>
	<script type="text/javascript" src="elementlist.js?2861350629"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active main"><a href="package-MyWrapper.html">MyWrapper<span></span></a>
						<ul>
				<li class="main"><a href="package-MyWrapper.Data.html">Data</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Definitions.html">Definitions</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Framework.html">Framework</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Functions.html">Functions</a>
						</li>
				<li class="active main"><a href="package-MyWrapper.Ontology.html">Ontology</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Persistence.html">Persistence</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Wrappers.html">Wrappers</a>
						</li>
							</ul></li>
				<li><a href="package-None.html">None</a>
						</li>
				<li><a href="package-PHP.html">PHP</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-COntologyAliasNode.html">COntologyAliasNode</a></li>
				<li><a href="class-COntologyAliasVertex.html">COntologyAliasVertex</a></li>
				<li><a href="class-COntologyEdge.html">COntologyEdge</a></li>
				<li><a href="class-COntologyMasterNode.html">COntologyMasterNode</a></li>
				<li><a href="class-COntologyMasterVertex.html">COntologyMasterVertex</a></li>
				<li><a href="class-COntologyNode.html">COntologyNode</a></li>
				<li class="active"><a href="class-COntologyTag.html">COntologyTag</a></li>
				<li><a href="class-COntologyTerm.html">COntologyTerm</a></li>
				<li><a href="class-COntologyVertex.html">COntologyVertex</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-MyWrapper.Ontology.html" title="Summary of MyWrapper\Ontology"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class COntologyTag</h1>


	<div class="description">
	
<h4>Ontology tag object ancestor</h4>

<p>This class extends its ancestor, <code><a href="class-CTag.html">CTag</a></code>, by asserting the type of
objects passed to the path, kTAG_PATH, and by using term references as
the elements of the object's path and global identifier.</p>

<ul>
	<li><i>Path</i>: As in the parent class, this attribute collects graph vertices
	and the predicates that connect them. The odd elements are expected to be vertex
	nodes of graph and the even elements the predicate terms that connect them. In
	this class the vertices are represented by the kTAG_TERM reference of
	the vertex <code><a href="class-COntologyNode.html">COntologyNode</a></code> instances, while the predicates are represented
	by the <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> kTAG_NID of the predicate terms.</li>

	<li><i>Global identifier</i>: The global identifier, <code><a href="class-CPersistentObject.html#_GID">CPersistentObject::GID()</a></code>, in this
	class is represented by the concatenation of the kTAG_GID attributes of
	all the <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> instance references of the object's path, kTAG_PATH, separated by the kTOKEN_INDEX_SEPARATOR token.</li>

	<li><i>Unique identifier</i>: The unique identifier, kTAG_UID, in this
	class is represented by the hash of the global identifier.</li>
</ul>

<p>Elements of the path can be provided as committed objects, they must have
their kTAG_NID set. <code><a href="class-COntologyNode.html">COntologyNode</a></code> instances or references can
only be provided as odd elements, while <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> instances or
references can be provided as both odd or even elements. Note that nodes will
always be resolved into the terms they refer to, so <i>there there is no direct
relationship between nodes and tags</i>.</p>

<p>This particular behaviour allows for different graph paths to share the same
tag, which allows duplicating ontologies for use as templates, or preventing
duplicate data types from being tagged differently. It also allows the same
vertex elements to be treated differently if their predicates differ.</p>

<p>Objects of this class will almost always be created by providing a sequence
of node vertices and predicate terms, the <code><a href="class-COntologyTag.html#_PushItem">COntologyTag::PushItem()</a></code> method will follow
these rules: the first element of the path is the feature vertex, if provided as
an <code><a href="class-COntologyNode.html">COntologyNode</a></code> instance, it must have its <code><a href="class-CNode.html#_Kind">CNode::Kind()</a></code> set to kKIND_NODE_FEATURE; the last element of
the path is the scale vertex, if provided as an <code><a href="class-COntologyNode.html">COntologyNode</a></code> instance,
it must have its <code><a href="class-CNode.html#_Kind">CNode::Kind()</a></code> set to kKIND_NODE_SCALE.</p>

<p>Whenever a tag is committed, the referenced terms will receive the tag kTAG_NID in an attribute, depending on their position in the path: the first
path term will receive the tag reference in the kTAG_FEATURES attribute,
the terms which are neither the first nor the last in the path receive the
reference in kTAG_METHODS and the last term in kTAG_SCALES.</p>

<p>This class prevents updating the full object once it has been inserted for
the first time. This behaviour is necessary because tags are referenced by many
other objects, so updating a full tag object is risky, since it may have been
updated elsewhere: for this reason the <code><a href="class-COntologyTag.html#_Update">COntologyTag::Update()</a></code> and <code><a href="class-COntologyTag.html#_Replace">COntologyTag::Replace()</a></code>
methods will raise an exception.</p>

<p>Objects of this class use a sequence number as their native identifier,
kTAG_NID, tagged as kSEQUENCE_KEY_TAG.</p>

<p>The class implements the static method, <code><a href="class-COntologyTag.html#_DefaultContainer">COntologyTag::DefaultContainer()</a></code>, which,
given a database, will return the default tag container; it will use the kCONTAINER_TAG_NAME constant as the container name.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-ArrayObject.html"><span>ArrayObject</span></a>
			
			 implements 
				<a href="class-IteratorAggregate.html"><span>IteratorAggregate</span></a>, 
			
				<a href="class-Traversable.html"><span>Traversable</span></a>, 
			
				<a href="class-ArrayAccess.html"><span>ArrayAccess</span></a>, 
			
				<a href="class-Serializable.html"><span>Serializable</span></a>, 
			
				<a href="class-Countable.html"><span>Countable</span></a>
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CDocument.html"><span>CDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:60px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CStatusDocument.html"><span>CStatusDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:90px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CPersistentDocument.html"><span>CPersistentDocument</span></a>
			
			
			
		</dd>
		<dd style="padding-left:120px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CPersistentObject.html"><span>CPersistentObject</span></a>
			
			
			
		</dd>
		<dd style="padding-left:150px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CTag.html"><span>CTag</span></a>
			
			
			
		</dd>
		<dd style="padding-left:180px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>COntologyTag</span></b>			
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		
		<b>Package:</b> <a href="package-MyWrapper.html">MyWrapper</a>\<a href="package-MyWrapper.Ontology.html">Ontology</a><br />

				<b>Author:</b>
				Milko A. Škofič &lt;<a
href="mailto:m.skofic&#64;cgiar.org">m.skofic&#64;<!---->cgiar.org</a>&gt;<br />
		<b>Located at</b> <a href="source-class-COntologyTag.html#43-1152" title="Go to source code">COntologyTag.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="PushItem" id="_PushItem">

		<td class="attributes"><code>
			 public 
			integer
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_PushItem">#</a>
		<code><a href="source-class-COntologyTag.html#121-290" title="Go to source code">PushItem</a>( <span>mixed <var>$theValue</var></span> )</code>

		<div class="description short">
			
<h4>Append to path</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Append to path</h4>

<p>We overload the parent method to implement the following rules:</p>

<ul>
	<li>All elements of the path must be <code><a href="class-COntologyTerm.html">COntologyTerm</a></code> instance
	references.</li>

	<li>Odd elements of the path are graph vertices and can be provided as <code><a href="class-COntologyNode.html">COntologyNode</a></code> instances:
		<ul>
			<li><code><a href="class-COntologyNode.html">COntologyNode</a></code> instances will be converted into their kTAG_TERM property.</li>

			<li><tt>Integer</tt> values will <i>not</i> be interpreted as node references,
			since there is no way to resolve them.</li>

			<li>If the first element of the path is an <code><a href="class-COntologyNode.html">COntologyNode</a></code> instance, the
			latter must have its kTAG_KIND attribute set to kKIND_NODE_FEATURE.</li>

			<li>If the last element of the path is an <code><a href="class-COntologyNode.html">COntologyNode</a></code> instance, the
			latter must have its kTAG_KIND attribute set to kKIND_NODE_SCALE.</li>
		</ul>
	</li>

	<li>{link COntologyTerm} instances will be accepted in any position.</li>

	<li>{link COntologyTerm} instances must have their kTAG_NID
	attribute.</li>

	<li>Any other data type will be interpreted as the term's kTAG_NID and
	no verification will be performed.</li>
</ul>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theValue</var></dt>
					<dd><code>mixed</code><br>$theValue Value to append.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>integer</code><br>Number of items in the list.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kTAG_PATH<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CPersistentObject.html#__AssertClass">CPersistentObject::_AssertClass()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CTag.html#_PushItem">CTag::PushItem()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="GetFeatureVertex" id="_GetFeatureVertex">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_GetFeatureVertex">#</a>
		<code><a href="source-class-COntologyTag.html#297-320" title="Go to source code">GetFeatureVertex</a>( )</code>

		<div class="description short">
			
<h4>Return trait term</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return trait term</h4>

<p>This method will return the current tag's feature term, if present, or
<tt>NULL</tt>.</p>

<p>The feature vertex is the first element of the path, it refers the ontology
term that represents the feature or trait the current object is tagging.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>First element of the terms list, or <tt>NULL</tt>.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kTAG_PATH<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="GetMethodVertex" id="_GetMethodVertex">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_GetMethodVertex">#</a>
		<code><a href="source-class-COntologyTag.html#327-376" title="Go to source code">GetMethodVertex</a>( )</code>

		<div class="description short">
			
<h4>Return method terms</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return method terms</h4>

<p>This method will return the current tag's list of method terms, if present,
or <tt>NULL</tt>.</p>

<p>The method vertex is the any odd element of the path that is neither the
first nor the last, it represents the pipeline of modifiers applied to the
feature vertex.</p>

<p>The method will return an array if at least one method is present.</p>

<p>Note that there must be at least 5 elements in the path to have one
method.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>List of method nodes, or <tt>NULL</tt>.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kTAG_PATH<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="GetScaleVertex" id="_GetScaleVertex">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_GetScaleVertex">#</a>
		<code><a href="source-class-COntologyTag.html#383-410" title="Go to source code">GetScaleVertex</a>( )</code>

		<div class="description short">
			
<h4>Return scale term</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return scale term</h4>

<p>This method will return the current tag's scale term, if present, or
<tt>NULL</tt>.</p>

<p>The scale vertex is the last element of the path, it refers the ontology term
that represents the scale or unit the current object is tagging.</p>

<p>Note that if the tag contains only one vertex, that will be both a feature
and a scale.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>Last element of the terms list, or <tt>NULL</tt>.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kTAG_PATH<br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="Update" id="_Update">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Update">#</a>
		<code><a href="source-class-COntologyTag.html#426-456" title="Go to source code">Update</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Update the object in a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update the object in a container</h4>

<p>We overload this method to raise an exception: objects of this class can only
be inserted, after this one can only modify their attributes using the
modification interface provided by container objects.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#_Update">CPersistentDocument::Update()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Replace" id="_Replace">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Replace">#</a>
		<code><a href="source-class-COntologyTag.html#463-503" title="Go to source code">Replace</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span> )</code>

		<div class="description short">
			
<h4>Replace the object into a container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Replace the object into a container</h4>

<p>We overload this method to raise an exception: objects of this class can only
be inserted, after this one can only modify their attributes using the
modification interface provided by container objects.</p>

<p>In this class we prevent replacing a committed object and allow inserting a
non committed object.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br>The object's native identifier.<br />
				</div>



				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#_Replace">CPersistentDocument::Replace()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="DefaultContainer" id="_DefaultContainer">

		<td class="attributes"><code>
			 public static
			<code><a href="class-CContainer.html">CContainer</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_DefaultContainer">#</a>
		<code><a href="source-class-COntologyTag.html#519-536" title="Go to source code">DefaultContainer</a>( <span><code><a href="class-CDatabase.html">CDatabase</a></code> <var>$theDatabase</var></span> )</code>

		<div class="description short">
			
<h4>Return the tags container</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return the tags container</h4>

<p>The container will be created or fetched from the provided database using the
kCONTAINER_TAG_NAME name.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theDatabase</var></dt>
					<dd><code><code><a href="class-CDatabase.html">CDatabase</a></code></code><br>$theDatabase Database object.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-CContainer.html">CContainer</a></code></code><br>The tags container.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kCONTAINER_TAG_NAME<br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#_DefaultContainer">CPersistentDocument::DefaultContainer()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Resolve" id="_Resolve">

		<td class="attributes"><code>
			 public static
			<code><a href="class-COntologyTerm.html">COntologyTerm</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Resolve">#</a>
		<code><a href="source-class-COntologyTag.html#552-702" title="Go to source code">Resolve</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>mixed <var>$theIdentifier</var></span>, <span>boolean <var>$doThrow</var> = <span class="php-keyword1">FALSE</span> </span> )</code>

		<div class="description short">
			
<h4>Resolve a tag</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Resolve a tag</h4>

<p>This method can be used to retrieve an existing tag by identifier, or
retrieve all tags matching a term.</p>

<p>The method accepts the following parameters:</p>

<ul>
	<li><tt>$theConnection</tt>: This parameter represents the connection from which
	the tags container must be resolved. Note that this method might need to resolve
	the terms container, so provide at least a database.</li>

	<li><tt>$theIdentifier</tt>: This parameter represents the identifier to be
	resolved:
		<ul>
			<li><tt>integer</tt>: In this case the method assumes that the parameter
			represents the tag identifier: it will attempt to retrieve the tag, if it is not
			found, the method will return <tt>NULL</tt>.</li>

			<li><tt>array</tt>: In this case the method assumes the array is the tag path,
			kTAG_PATH, it will attempt to convert it into the tag kTAG_UID
			and locate it.</li>

			<li><i>other</i>: Any other type will be interpreted either the tag's unique
			identifier, or as the tag's global identifier: the method will return the
			matching tag or <tt>NULL</tt>.</li>
		</ul>
	</li>

	<li><tt>$doThrow</tt>: If <tt>TRUE</tt>, any failure to resolve the tag will
	raise an exception.</li>
</ul>

<p>The method will return an instance of this class, or <tt>NULL</tt>, if the
identifier was not resolved.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$theIdentifier</var></dt>
					<dd><code>mixed</code><br>$theIdentifier Identifier to be resolved.</dd>
					<dt><var>$doThrow</var></dt>
					<dd><code>boolean</code><br>$doThrow If <tt>TRUE</tt> raise an exception.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-COntologyTerm.html">COntologyTerm</a></code></code><br>Found tag or <tt>NULL</tt>.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="_index" id="__index">

		<td class="attributes"><code>
			 protected 
			string|null
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__index">#</a>
		<code><a href="source-class-COntologyTag.html#718-770" title="Go to source code">_index</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>bitfield <var>$theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Return the object's global unique identifier</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Return the object's global unique identifier</h4>

<p>We override the parent method to handle the referenced objects: in this class
the global identifier is the concatenation of all the referenced terms of the
tag path, this method will take care of instantiating the necessary objects and
building the global identifier.</p>

<p>This method is called by the <code><a href="class-COntologyTag.html#__PrecommitIdentify">COntologyTag::_PrecommitIdentify()</a></code> and expects all
elements of the path to be object native identifiers.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>bitfield</code><br>$theModifiers Commit options.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string|null</code><br>The object's global unique identifier.<br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kTAG_PATH kTOKEN_INDEX_SEPARATOR<br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-COntologyTag.html#__PrecommitIdentify">COntologyTag::_PrecommitIdentify()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CTag.html#__index">CTag::_index()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_Preset" id="__Preset">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Preset">#</a>
		<code><a href="source-class-COntologyTag.html#786-820" title="Go to source code">_Preset</a>( <span>reference <var>&amp; $theOffset</var></span>, <span>reference <var>&amp; $theValue</var></span> )</code>

		<div class="description short">
			
<h4>Handle offset before setting it</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Handle offset before setting it</h4>

<p>In this class we lock the kTAG_PATH attribute if the object is
committed.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theOffset</var></dt>
					<dd><code>reference</code><br>&amp;$theOffset Offset.</dd>
					<dt><var>$theValue</var></dt>
					<dd><code>reference</code><br>&amp;$theValue Value to set at offset.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kTAG_PATH<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CTag.html#__Preset">CTag::_Preset()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_Preunset" id="__Preunset">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Preunset">#</a>
		<code><a href="source-class-COntologyTag.html#827-860" title="Go to source code">_Preunset</a>( <span>reference <var>&amp; $theOffset</var></span> )</code>

		<div class="description short">
			
<h4>Handle offset before unsetting it</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Handle offset before unsetting it</h4>

<p>In this class we lock the kTAG_PATH attribute if the object is
committed and the kTAG_UID in all cases.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theOffset</var></dt>
					<dd><code>reference</code><br>&amp;$theOffset Offset.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kTAG_PATH<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentObject.html#__Preunset">CPersistentObject::_Preunset()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PrecommitIdentify" id="__PrecommitIdentify">

		<td class="attributes"><code>
			 protected 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrecommitIdentify">#</a>
		<code><a href="source-class-COntologyTag.html#876-976" title="Go to source code">_PrecommitIdentify</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Determine the identifiers before committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Determine the identifiers before committing</h4>

<p>This method will use the result of the <code><a href="class-COntologyTag.html#__index">COntologyTag::_index()</a></code> method to set the
global identifier, kTAG_GID; the same value will be hashed and
constitute the unique identifier, kTAG_UID, while the native identifier,
kTAG_NID, will be set by the sequence number kSEQUENCE_KEY_TAG.</p>

<p>The parent method will then be called, which will ignore the global and
native identifiers, since they will have been set here.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br />
				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>

				<h4>See</h4>
				<div class="list">
						kSEQUENCE_KEY_TAG<br />
						kTAG_NID kTAG_GID kTAG_UID<br />
						kFLAG_PERSIST_INSERT kFLAG_PERSIST_REPLACE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
						<code><code><a href="class-COntologyTag.html#__index">COntologyTag::_index()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentObject.html#__PrecommitIdentify">CPersistentObject::_PrecommitIdentify()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PostcommitRelated" id="__PostcommitRelated">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PostcommitRelated">#</a>
		<code><a href="source-class-COntologyTag.html#992-1067" title="Go to source code">_PostcommitRelated</a>( <span>reference <var>&amp; $theConnection</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<h4>Update related objects after committing</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Update related objects after committing</h4>

<p>Once committed, the referenced feature, method and scale vertices will be
updated with the current tag's identifier in the respective kTAG_FEATURES, kTAG_METHODS and kTAG_SCALES attributes.</p>

<p>When inserting a new tag, we add the tag reference, when deleting the tag we
remove it.</p>

<p>We only handle vertex elements, we do not refer predicate terms.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code>reference</code><br>&amp;$theConnection Server, database or container.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit options.</dd>
				</dl></div>



				<h4>See</h4>
				<div class="list">
						kTAG_FEATURES, kTAG_METHODS, kTAG_SCALES<br />
						kFLAG_PERSIST_INSERT kFLAG_PERSIST_REPLACE kFLAG_PERSIST_DELETE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CStatusDocument.html#__IsCommitted">CStatusDocument::_IsCommitted()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CPersistentDocument.html#__PostcommitRelated">CPersistentDocument::_PostcommitRelated()</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_ReferenceInTerm" id="__ReferenceInTerm">

		<td class="attributes"><code>
			 protected 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__ReferenceInTerm">#</a>
		<code><a href="source-class-COntologyTag.html#1083-1148" title="Go to source code">_ReferenceInTerm</a>( <span><code><a href="class-CConnection.html">CConnection</a></code> <var>$theConnection</var></span>, <span>mixed <var>$theTerm</var></span>, <span>string <var>$theTag</var></span>, <span>boolean <var>$doAdd</var></span> )</code>

		<div class="description short">
			
<h4>Add tag reference to term</h4>

		</div>

		<div class="description detailed hidden">
			
<h4>Add tag reference to term</h4>

<p>This method can be used to add or remove the current tag's reference from the
provided term. This method should be used whenever committing a new tag or when
deleting one: it will update the term's kTAG_REFS_TAG for terms used as
predicates, the kTAG_FEATURES for terms used as features or traits, the
kTAG_METHODS for terms used as methods and the kTAG_SCALES for
terms used as scales or units, the method will add the corresponding reference
when inserting a new tag and remove it when deleting the tag.</p>

<ul>
	<li><tt>$theConnection</tt>: Server, database or container in which the terms
	reside.</li>

	<li><tt>$theTerm</tt>: Term object or identifier to which the current tag
	reference is to be added or removed.</li>

	<li><tt>$theTag</tt>: Attribute tag of the terem to which the current tag
	reference is to be added or removed.</li>

	<li><tt>$doAdd</tt>: If <tt>TRUE</tt> add to set; if <tt>FALSE</tt> remove from
	set.</li>
</ul>

<p>The method will return <tt>TRUE</tt> if the operation affected at least one
object, <tt>FALSE</tt> if not and raise an exception if the operation
failed.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theConnection</var></dt>
					<dd><code><code><a href="class-CConnection.html">CConnection</a></code></code><br>$theConnection Server, database or container.</dd>
					<dt><var>$theTerm</var></dt>
					<dd><code>mixed</code><br>$theTerm Term object or identifier.</dd>
					<dt><var>$theTag</var></dt>
					<dd><code>string</code><br>$theTag Attribute tag to update.</dd>
					<dt><var>$doAdd</var></dt>
					<dd><code>boolean</code><br>$doAdd <tt>TRUE</tt> add reference.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br><tt>TRUE</tt> operation affected at least one object.<br />
				</div>


				<h4>See</h4>
				<div class="list">
						kTAG_NID kTAG_REFS_TAG<br />
						kTAG_FEATURES kTAG_METHODS kTAG_SCALES<br />
						kFLAG_PERSIST_MODIFY kFLAG_MODIFY_ADDSET kFLAG_MODIFY_PULL<br />
				</div>


		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CTag.html#methods">CTag</a></caption>
	<tr>
		<td><code>
			<a href="class-CTag.html#_PopItem">PopItem()</a>, 
			<a href="class-CTag.html#__PrecommitValidate">_PrecommitValidate()</a>, 
			<a href="class-CTag.html#__Ready">_Ready()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CPersistentObject.html#methods">CPersistentObject</a></caption>
	<tr>
		<td><code>
			<a href="class-CPersistentObject.html#_CLassName">CLassName()</a>, 
			<a href="class-CPersistentObject.html#_DocumentObject">DocumentObject()</a>, 
			<a href="class-CPersistentObject.html#_GID">GID()</a>, 
			<a href="class-CPersistentObject.html#_NewObject">NewObject()</a>, 
			<a href="class-CPersistentObject.html#__AssertClass">_AssertClass()</a>, 
			<a href="class-CPersistentObject.html#__PrecommitRelated">_PrecommitRelated()</a>, 
			<a href="class-CPersistentObject.html#___toString">__toString()</a>, 
			<a href="class-CPersistentObject.html#__id">_id()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CPersistentDocument.html#methods">CPersistentDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CPersistentDocument.html#_DefaultDatabase">DefaultDatabase()</a>, 
			<a href="class-CPersistentDocument.html#_Delete">Delete()</a>, 
			<a href="class-CPersistentDocument.html#_Insert">Insert()</a>, 
			<a href="class-CPersistentDocument.html#_NID">NID()</a>, 
			<a href="class-CPersistentDocument.html#_ResolveClassContainer">ResolveClassContainer()</a>, 
			<a href="class-CPersistentDocument.html#_ResolveContainer">ResolveContainer()</a>, 
			<a href="class-CPersistentDocument.html#_Restore">Restore()</a>, 
			<a href="class-CPersistentDocument.html#__Postcommit">_Postcommit()</a>, 
			<a href="class-CPersistentDocument.html#__PostcommitCleanup">_PostcommitCleanup()</a>, 
			<a href="class-CPersistentDocument.html#__PostcommitStatus">_PostcommitStatus()</a>, 
			<a href="class-CPersistentDocument.html#__Precommit">_Precommit()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CStatusDocument.html#methods">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#__IsCommitted">_IsCommitted()</a>, 
			<a href="class-CStatusDocument.html#__IsDirty">_IsDirty()</a>, 
			<a href="class-CStatusDocument.html#__IsEncoded">_IsEncoded()</a>, 
			<a href="class-CStatusDocument.html#__IsInited">_IsInited()</a>, 
			<a href="class-CStatusDocument.html#__Postset">_Postset()</a>, 
			<a href="class-CStatusDocument.html#__Postunset">_Postunset()</a>, 
			<a href="class-CStatusDocument.html#___construct">__construct()</a>, 
			<a href="class-CStatusDocument.html#_offsetSet">offsetSet()</a>, 
			<a href="class-CStatusDocument.html#_offsetUnset">offsetUnset()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CDocument.html#methods">CDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CDocument.html#_array_keys">array_keys()</a>, 
			<a href="class-CDocument.html#_array_values">array_values()</a>, 
			<a href="class-CDocument.html#_offsetGet">offsetGet()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-ArrayObject.html#methods">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#_append">append()</a>, 
			<a href="class-ArrayObject.html#_asort">asort()</a>, 
			<a href="class-ArrayObject.html#_count">count()</a>, 
			<a href="class-ArrayObject.html#_exchangeArray">exchangeArray()</a>, 
			<a href="class-ArrayObject.html#_getArrayCopy">getArrayCopy()</a>, 
			<a href="class-ArrayObject.html#_getFlags">getFlags()</a>, 
			<a href="class-ArrayObject.html#_getIterator">getIterator()</a>, 
			<a href="class-ArrayObject.html#_getIteratorClass">getIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_ksort">ksort()</a>, 
			<a href="class-ArrayObject.html#_natcasesort">natcasesort()</a>, 
			<a href="class-ArrayObject.html#_natsort">natsort()</a>, 
			<a href="class-ArrayObject.html#_offsetExists">offsetExists()</a>, 
			<a href="class-ArrayObject.html#_serialize">serialize()</a>, 
			<a href="class-ArrayObject.html#_setFlags">setFlags()</a>, 
			<a href="class-ArrayObject.html#_setIteratorClass">setIteratorClass()</a>, 
			<a href="class-ArrayObject.html#_uasort">uasort()</a>, 
			<a href="class-ArrayObject.html#_uksort">uksort()</a>, 
			<a href="class-ArrayObject.html#_unserialize">unserialize()</a>
		</code></td>
	</tr>
	</table>








	<table class="summary inherited">
	<caption>Constants inherited from <a href="class-ArrayObject.html#constants">ArrayObject</a></caption>
	<tr>
		<td><code>
			<a href="class-ArrayObject.html#ARRAY_AS_PROPS"><b>ARRAY_AS_PROPS</b></a>, 
			<a href="class-ArrayObject.html#STD_PROP_LIST"><b>STD_PROP_LIST</b></a>
		</code></td>
	</tr>
	</table>




	<table class="summary inherited">
	<caption>Properties inherited from <a href="class-CStatusDocument.html#properties">CStatusDocument</a></caption>
	<tr>
		<td><code>
			<a href="class-CStatusDocument.html#$mStatus"><var>$mStatus</var></a>
		</code></td>
	</tr>
	</table>





</div>

	<div id="footer">
		MyWrapper Reference Documentation API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
