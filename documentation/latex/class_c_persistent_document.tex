\hypertarget{class_c_persistent_document}{\section{C\-Persistent\-Document Class Reference}
\label{class_c_persistent_document}\index{C\-Persistent\-Document@{C\-Persistent\-Document}}
}
Inheritance diagram for C\-Persistent\-Document\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.461539cm]{class_c_persistent_document}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_persistent_document_ad9d15abc074aa3f779f214771b6123b0}{N\-I\-D} (\$the\-Value=N\-U\-L\-L, \$get\-Old=F\-A\-L\-S\-E)
\item 
\hyperlink{class_c_persistent_document_a3b3a1168053b14b065e11caad44dc971}{Insert} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection)
\item 
\hyperlink{class_c_persistent_document_ae0435275b85d3d3fa6eb76711e0f0832}{Update} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection)
\item 
\hyperlink{class_c_persistent_document_a1a3fb046a36fec064fca7cacdcc6cb3e}{Replace} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection)
\item 
\hyperlink{class_c_persistent_document_a19f7dbe659a1174d844799e403d1a678}{Restore} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection)
\item 
\hyperlink{class_c_persistent_document_a7ea1235ae140507d9fc0f94b6060540c}{Delete} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{class_c_persistent_document_afdb58ccaae70ff12ad424fd841f23fe9}{New\-Object} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection, \$the\-Identifier, \$do\-Throw=F\-A\-L\-S\-E)
\item 
static \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} (\hyperlink{class_c_server}{C\-Server} \$the\-Server)
\item 
static \hyperlink{class_c_persistent_document_a031b386207e40e4be4e0660de5da1b11}{Default\-Database\-Name} ()
\item 
static \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container} (\hyperlink{class_c_database}{C\-Database} \$the\-Database)
\item 
static \hyperlink{class_c_persistent_document_ab2fa5e1b0e3f967b8b3727eb28300652}{Default\-Container\-Name} ()
\item 
static \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection, \$do\-Exception)
\item 
static \hyperlink{class_c_persistent_document_ac6a46b4cfed5f22ec63a6436a107ed69}{Resolve\-Class\-Container} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection, \$do\-Exception)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection, \$the\-Modifiers=k\-F\-L\-A\-G\-\_\-\-D\-E\-F\-A\-U\-L\-T)
\item 
\hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Connection, \$the\-Modifiers=k\-F\-L\-A\-G\-\_\-\-D\-E\-F\-A\-U\-L\-T)
\item 
\hyperlink{class_c_persistent_document_afdf23fd212084711a4c6357e335c3214}{\-\_\-\-Precommit\-Validate} (\&\$the\-Connection, \&\$the\-Modifiers)
\item 
\hyperlink{class_c_persistent_document_a432319392179e142ed03919b9eddc30e}{\-\_\-\-Precommit\-Related} (\&\$the\-Connection, \&\$the\-Modifiers)
\item 
\hyperlink{class_c_persistent_document_aff5680d29ebcbc9fce715270759a95cd}{\-\_\-\-Precommit\-Identify} (\&\$the\-Connection, \&\$the\-Modifiers)
\item 
\hyperlink{class_c_persistent_document_a7772771f349b5d9d4dbc192ce7c8a012}{\-\_\-\-Postcommit\-Related} (\&\$the\-Connection, \&\$the\-Modifiers)
\item 
\hyperlink{class_c_persistent_document_a774c94863383129a0813ee15a4cb76dd}{\-\_\-\-Postcommit\-Status} (\&\$the\-Connection, \&\$the\-Modifiers)
\item 
\hyperlink{class_c_persistent_document_a649e5b01c3e3c2d9ab0d99cff6b3349f}{\-\_\-\-Postcommit\-Cleanup} (\&\$the\-Connection, \&\$the\-Modifiers)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Member Function Documentation}
\hypertarget{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Postcommit@{\-\_\-\-Postcommit}}
\index{\-\_\-\-Postcommit@{\-\_\-\-Postcommit}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Postcommit}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Postcommit (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection, }
\item[{}]{\$the\-Modifiers = {\ttfamily kFLAG\-\_\-DEFAULT}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}
\subparagraph*{Prepare the object after committing}

This method will be called after the object gets committed, its main duty is to update the object after it has been committed.

This method calls three other methods which perform the following functions\-:


\begin{DoxyItemize}
\item \hyperlink{class_c_persistent_document_a7772771f349b5d9d4dbc192ce7c8a012}{\-\_\-\-Postcommit\-Related()}\-: This method's duty is to update related objects. 
\item \hyperlink{class_c_persistent_document_a774c94863383129a0813ee15a4cb76dd}{\-\_\-\-Postcommit\-Status()}\-: This method's duty is to set the object's status after the persist operation. 
\item \hyperlink{class_c_persistent_document_a649e5b01c3e3c2d9ab0d99cff6b3349f}{\-\_\-\-Postcommit\-Cleanup()}\-: This method's duty is to cleanup the object after the operation. 
\end{DoxyItemize}

These three methods are called in the above order, they take the same arguments as the current method and do not return a value\-: errors must raise exceptions.

When deriving from this class you should overload the above methods and not this one.

This method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Container. \\
\hline
bitfield & {\em \$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected

\hyperlink{class_c_persistent_document_a7772771f349b5d9d4dbc192ce7c8a012}{\-\_\-\-Postcommit\-Related()}  \hyperlink{class_c_persistent_document_a774c94863383129a0813ee15a4cb76dd}{\-\_\-\-Postcommit\-Status()}  \hyperlink{class_c_persistent_document_a649e5b01c3e3c2d9ab0d99cff6b3349f}{\-\_\-\-Postcommit\-Cleanup()} \hypertarget{class_c_persistent_document_a649e5b01c3e3c2d9ab0d99cff6b3349f}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Postcommit\-Cleanup@{\-\_\-\-Postcommit\-Cleanup}}
\index{\-\_\-\-Postcommit\-Cleanup@{\-\_\-\-Postcommit\-Cleanup}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Postcommit\-Cleanup}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Postcommit\-Cleanup (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Connection, }
\item[{\&}]{\$the\-Modifiers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_a649e5b01c3e3c2d9ab0d99cff6b3349f}
\subparagraph*{Cleanup the object after committing}

This method should clean and normalise the object after the operation, it is the last method called by \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} and the last chance to have a hook into the persist workflow.

Be aware that \hyperlink{class_c_persistent_document_a774c94863383129a0813ee15a4cb76dd}{\-\_\-\-Postcommit\-Status()} has been called before, so if you intend to perform operations that may change the object's status, this is not the place.

The method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. This parameter is provided as a reference allowing this method to change it. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}This parameter is provided as a reference allowing this method to change it. 
\end{DoxyItemize}

In this class we reset the \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status after committing or loading the object, set the \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status after committing and resetting it after deleting.

In this class we do nothing.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Connection} & Server, database or container. \\
\hline
reference & {\em \&\$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected \hypertarget{class_c_persistent_document_a7772771f349b5d9d4dbc192ce7c8a012}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Postcommit\-Related@{\-\_\-\-Postcommit\-Related}}
\index{\-\_\-\-Postcommit\-Related@{\-\_\-\-Postcommit\-Related}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Postcommit\-Related}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Postcommit\-Related (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Connection, }
\item[{\&}]{\$the\-Modifiers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_a7772771f349b5d9d4dbc192ce7c8a012}
\subparagraph*{Update related objects after committing}

This method should update eventual related objects after the current object has been committed. This method is the first one called by \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} after the persist operation and the object has not yet updated its status according to the operation, so this is a good place to make changes before the status gets reset.

The method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. This parameter is provided as a reference allowing this method to change it. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}This parameter is provided as a reference allowing this method to change it. 
\end{DoxyItemize}

In this class we do nothing.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Connection} & Server, database or container. \\
\hline
reference & {\em \&\$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected \hypertarget{class_c_persistent_document_a774c94863383129a0813ee15a4cb76dd}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Postcommit\-Status@{\-\_\-\-Postcommit\-Status}}
\index{\-\_\-\-Postcommit\-Status@{\-\_\-\-Postcommit\-Status}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Postcommit\-Status}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Postcommit\-Status (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Connection, }
\item[{\&}]{\$the\-Modifiers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_a774c94863383129a0813ee15a4cb76dd}
\subparagraph*{Update the object's status after committing}

This method should set the object status according to the operation performed, it is the second method called by \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} after the persist operation and is called before the \hyperlink{class_c_persistent_document_a649e5b01c3e3c2d9ab0d99cff6b3349f}{\-\_\-\-Postcommit\-Cleanup()} method that should cleanup after the operation.

In general this method should set or reset the status reflecting the persistent state of the object.

The method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. This parameter is provided as a reference allowing this method to change it. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}This parameter is provided as a reference allowing this method to change it. 
\end{DoxyItemize}

In this class we reset the \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status after committing or loading the object, set the \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status after committing and resetting it after deleting.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Connection} & Server, database or container. \\
\hline
reference & {\em \&\$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected

\hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()}  \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()}

\begin{DoxySeeAlso}{See Also}
k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-M\-A\-S\-K k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-C\-O\-M\-M\-I\-T\-\_\-\-M\-A\-S\-K k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E 
\end{DoxySeeAlso}
\hypertarget{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Precommit@{\-\_\-\-Precommit}}
\index{\-\_\-\-Precommit@{\-\_\-\-Precommit}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Precommit}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Precommit (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection, }
\item[{}]{\$the\-Modifiers = {\ttfamily kFLAG\-\_\-DEFAULT}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}
\subparagraph*{Prepare the object before committing}

This method will be called before the object gets committed, its main duty is to check whether the object has all the required elements, to set all default data amd to commit eventual embedded objects.

This method calls three other methods which perform the following functions\-:


\begin{DoxyItemize}
\item \hyperlink{class_c_persistent_document_afdf23fd212084711a4c6357e335c3214}{\-\_\-\-Precommit\-Validate()}\-: This method's duty is to check if the object is fot for being committed. 
\item \hyperlink{class_c_persistent_document_a432319392179e142ed03919b9eddc30e}{\-\_\-\-Precommit\-Related()}\-: This method's duty is to check and commit eventual embedded or related objects. 
\item \hyperlink{class_c_persistent_document_aff5680d29ebcbc9fce715270759a95cd}{\-\_\-\-Precommit\-Identify()}\-: This method's duty is to fill the object's identifiers. 
\end{DoxyItemize}

These three methods are called in the above order, they take the same arguments as the current method. These methods may return two kind of values\-:


\begin{DoxyItemize}
\item {\ttfamily N\-U\-L\-L}\-: This value indicates that everything should continue as planned. 
\item {\itshape other}\-: Any other value is interpreted as the object's native identifier, this is an indication that the object was committed and that the calling method can directly return this value. 
\end{DoxyItemize}

When deriving from this class you should overload the above methods and not this one.

This method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}
\end{DoxyItemize}

If the conditions for committing the object are not met, an exception should be raised.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Container. \\
\hline
bitfield & {\em \$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
mixed
\end{DoxyReturn}
\hyperlink{class_c_persistent_document_afdf23fd212084711a4c6357e335c3214}{\-\_\-\-Precommit\-Validate()}  \hyperlink{class_c_persistent_document_a432319392179e142ed03919b9eddc30e}{\-\_\-\-Precommit\-Related()}  \hyperlink{class_c_persistent_document_aff5680d29ebcbc9fce715270759a95cd}{\-\_\-\-Precommit\-Identify()} \hypertarget{class_c_persistent_document_aff5680d29ebcbc9fce715270759a95cd}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Precommit\-Identify@{\-\_\-\-Precommit\-Identify}}
\index{\-\_\-\-Precommit\-Identify@{\-\_\-\-Precommit\-Identify}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Precommit\-Identify}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Precommit\-Identify (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Connection, }
\item[{\&}]{\$the\-Modifiers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_aff5680d29ebcbc9fce715270759a95cd}
\subparagraph*{Determine the identifiers before committing}

This method should set the object identifiers before the current object gets committed. In general it is here where you set sequence numbers or generate unique identifiers.

This method is the last one called by \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()}, in general, it should not fail if the first method called by \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()} has made the necessary validations. The reason this method is the last in the chain is because often the object identifier may depend on related or embedded objects which have been committed in the previous method.

If this method returns {\ttfamily N\-U\-L\-L}, the caller will continue as usual; if the method returns another type of value, the caller should return that value.

If any error occurs during the process, this method should still raise an exception.

The method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. This parameter is provided as a reference allowing this method to change it. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}This parameter is provided as a reference allowing this method to change it. 
\end{DoxyItemize}

In this class we do nothing.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Connection} & Server, database or container. \\
\hline
reference & {\em \&\$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
mixed 
\end{DoxyReturn}
\hypertarget{class_c_persistent_document_a432319392179e142ed03919b9eddc30e}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Precommit\-Related@{\-\_\-\-Precommit\-Related}}
\index{\-\_\-\-Precommit\-Related@{\-\_\-\-Precommit\-Related}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Precommit\-Related}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Precommit\-Related (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Connection, }
\item[{\&}]{\$the\-Modifiers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_a432319392179e142ed03919b9eddc30e}
\subparagraph*{Handle embedded or related objects before committing}

This method should handle embedded or related objects before the current object gets committed. In general it is here where you would commit embedded objects and convert them to references.

This method is the second one called by \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()}, it should handle the object elements specific to the current class and let the inherited method handle the inherited ones.

If this method returns {\ttfamily N\-U\-L\-L}, the caller will continue as usual; if the method returns another type of value, the caller should return that value.

If any error occurs during the process, this method should raise an exception.

The method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. This parameter is provided as a reference allowing this method to change it. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}This parameter is provided as a reference allowing this method to change it. 
\end{DoxyItemize}

In this class we do nothing.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Connection} & Server, database or container. \\
\hline
reference & {\em \&\$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
mixed 
\end{DoxyReturn}
\hypertarget{class_c_persistent_document_afdf23fd212084711a4c6357e335c3214}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!\-\_\-\-Precommit\-Validate@{\-\_\-\-Precommit\-Validate}}
\index{\-\_\-\-Precommit\-Validate@{\-\_\-\-Precommit\-Validate}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{\-\_\-\-Precommit\-Validate}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-\_\-\-Precommit\-Validate (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Connection, }
\item[{\&}]{\$the\-Modifiers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_persistent_document_afdf23fd212084711a4c6357e335c3214}
\subparagraph*{Validate the object before committing}

This method should check if the object is in the condition for being inserted, updated, replaced or deleted.

This method is the first one called by \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()}, it should validate the object elements specific to the current class and let the inherited method handle the inherited ones.

If this method returns {\ttfamily N\-U\-L\-L}, the caller will continue as usual; if the method returns another type of value, the caller should return that value.

If the object does not meet the requirements for the desired operation, this method should raise an exception.

The method accepts two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object is to be committed, a server or a database if the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} are able to resolve it into a container. This parameter is provided as a reference allowing this method to change it. 
\item {\ttfamily \$the\-Modifiers}\-: The commit options provided as a bitfield in which the following values are considered\-: 
\begin{DoxyItemize}
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T}}\-: Insert operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E}}\-: Update operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E}}\-: Replace operation. 
\item {\ttfamily \hyperlink{}{k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-D\-E\-L\-E\-T\-E}}\-: Delete operation. 
\end{DoxyItemize}This parameter is provided as a reference allowing this method to change it. 
\end{DoxyItemize}

In this class we check if the object has the \hyperlink{class_c_status_document_a954dee06e219e0a0f2e7fa6edac56e28}{\-\_\-\-Is\-Inited()} status.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Connection} & Server, database or container. \\
\hline
reference & {\em \&\$the\-Modifiers} & Commit options.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
mixed
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \\
\hline
\end{DoxyExceptions}
\begin{DoxyReturn}{Returns}
mixed
\end{DoxyReturn}
\hyperlink{class_c_status_document_a954dee06e219e0a0f2e7fa6edac56e28}{\-\_\-\-Is\-Inited()}

\begin{DoxySeeAlso}{See Also}
k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-W\-R\-I\-T\-E\-\_\-\-M\-A\-S\-K 
\end{DoxySeeAlso}
\hypertarget{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Default\-Container@{Default\-Container}}
\index{Default\-Container@{Default\-Container}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Default\-Container}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-Default\-Container (
\begin{DoxyParamCaption}
\item[{{\bf C\-Database}}]{\$the\-Database}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}
\subparagraph*{Return the default container}

The container will be created or fetched from the provided database using the static \hyperlink{class_c_persistent_document_ab2fa5e1b0e3f967b8b3727eb28300652}{Default\-Container\-Name()} name.

If the class features a container name, this method will return a corresponding container object; if the class does not feature a container name, the method will return {\ttfamily N\-U\-L\-L}.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_database}{C\-Database} & {\em \$the\-Database} & Database object.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{class_c_container}{C\-Container} The default container or {\ttfamily N\-U\-L\-L}.
\end{DoxyReturn}
\hyperlink{class_c_persistent_document_ab2fa5e1b0e3f967b8b3727eb28300652}{Default\-Container\-Name()} \hypertarget{class_c_persistent_document_ab2fa5e1b0e3f967b8b3727eb28300652}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Default\-Container\-Name@{Default\-Container\-Name}}
\index{Default\-Container\-Name@{Default\-Container\-Name}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Default\-Container\-Name}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-Default\-Container\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_ab2fa5e1b0e3f967b8b3727eb28300652}
\subparagraph*{Return the default container name}

This method should return the default container name used by instances of the class, this will be used to resolve containers from databases.

This class does not have a default container name, so it will return {\ttfamily N\-U\-L\-L}.

\begin{DoxyReturn}{Returns}
string The default container name.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \\
\hline
\end{DoxyExceptions}
\hypertarget{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Default\-Database@{Default\-Database}}
\index{Default\-Database@{Default\-Database}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Default\-Database}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-Default\-Database (
\begin{DoxyParamCaption}
\item[{{\bf C\-Server}}]{\$the\-Server}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}
\subparagraph*{Return the object default database}

This static method should be used to get the the class default database given a server. It expects a \hyperlink{class_c_server}{C\-Server} derived object and should return a \hyperlink{class_c_database}{C\-Database} derived object.

If the class does not feature a default database, this method should return {\ttfamily N\-U\-L\-L}.

By default we assume no default containers.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_server}{C\-Server} & {\em \$the\-Server} & Server object.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{class_c_database}{C\-Database} The default database. 
\end{DoxyReturn}
\hypertarget{class_c_persistent_document_a031b386207e40e4be4e0660de5da1b11}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Default\-Database\-Name@{Default\-Database\-Name}}
\index{Default\-Database\-Name@{Default\-Database\-Name}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Default\-Database\-Name}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-Default\-Database\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_a031b386207e40e4be4e0660de5da1b11}
\subparagraph*{Return the default database name}

This method should return the default database name used by instances of the class, this will be used to resolve databases from servers.

This class does not have a default database name, so it will return {\ttfamily N\-U\-L\-L}.

\begin{DoxyReturn}{Returns}
string The default database name.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \\
\hline
\end{DoxyExceptions}
\hypertarget{class_c_persistent_document_a7ea1235ae140507d9fc0f94b6060540c}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Delete@{Delete}}
\index{Delete@{Delete}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Delete}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-Delete (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection}
\end{DoxyParamCaption}
)}}\label{class_c_persistent_document_a7ea1235ae140507d9fc0f94b6060540c}
\subparagraph*{Delete the object from a container}

This method will remove the current object from the provided container.

The method expects a single parameter, {\ttfamily \$the\-Connection}, which represents the container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}.

Once the object has been deleted, it will have its \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status and its \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status reset.

The method will return {\ttfamily T\-R\-U\-E} if the object was deleted or {\ttfamily F\-A\-L\-S\-E} if the object was not found in the container.

Note that derived classes should overload the \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()} and \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} methods, rather than overloading this one.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Server, database or container.\\
\hline
\end{DoxyParams}
public \begin{DoxyReturn}{Returns}
boolean {\ttfamily T\-R\-U\-E} deleted, {\ttfamily F\-A\-L\-S\-E} not found.
\end{DoxyReturn}
\hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()}  \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} \hypertarget{class_c_persistent_document_a3b3a1168053b14b065e11caad44dc971}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Insert@{Insert}}
\index{Insert@{Insert}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Insert}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-Insert (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection}
\end{DoxyParamCaption}
)}}\label{class_c_persistent_document_a3b3a1168053b14b065e11caad44dc971}
\subparagraph*{Insert the object into a container}

This method will insert the current object into the provided container, if a duplicate object already exists in the container, the method will raise an exception.

The method expects a single parameter, {\ttfamily \$the\-Connection}, which represents the container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}.

The method may set the native unique identifier attribute (\hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D}) if not provided.

The operation will only be performed if the object has the \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status set or if it does not have its \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status set, in this event the method will return {\ttfamily N\-U\-L\-L}.

The method will return the object's native unique identifier attribute (\hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D}), or raise an exception if an error occurs.

Note that derived classes should overload the \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()} and \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} methods, rather than overloading this one.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Server, database or container.\\
\hline
\end{DoxyParams}
public \begin{DoxyReturn}{Returns}
mixed The object's native identifier.
\end{DoxyReturn}
\hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()}  \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()}  \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()}  \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()}  \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()}

\begin{DoxySeeAlso}{See Also}
k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-I\-N\-S\-E\-R\-T 
\end{DoxySeeAlso}
\hypertarget{class_c_persistent_document_afdb58ccaae70ff12ad424fd841f23fe9}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!New\-Object@{New\-Object}}
\index{New\-Object@{New\-Object}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{New\-Object}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-New\-Object (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection, }
\item[{}]{\$the\-Identifier, }
\item[{}]{\$do\-Throw = {\ttfamily FALSE}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_afdb58ccaae70ff12ad424fd841f23fe9}
\subparagraph*{Instantiate an object from a container}

This method will retrieve a document from the provided container, instantiate this class with it and return the object; if the document was not located in the container, the method will return {\ttfamily N\-U\-L\-L}.

The method expects a single parameter, {\ttfamily \$the\-Connection}, which represents the container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}.

The method expects two parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Connection}\-: The container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}. 
\item {\ttfamily \$the\-Identifier}\-: The key of the object in the container, by default the \hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D} offset. 
\item {\ttfamily \$do\-Throw}\-: If {\ttfamily T\-R\-U\-E}, any failure to resolve the object will raise an exception. 
\end{DoxyItemize}

If the object could not be located, the method will return {\ttfamily N\-U\-L\-L}.

Note that the resulting object will be of the class with which this static method was called.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Server, database or container. \\
\hline
mixed & {\em \$the\-Identifier} & Identifier. \\
\hline
boolean & {\em \$do\-Throw} & If {\ttfamily T\-R\-U\-E} raise an exception.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
mixed The retrieved object. 
\end{DoxyReturn}
\hypertarget{class_c_persistent_document_ad9d15abc074aa3f779f214771b6123b0}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!N\-I\-D@{N\-I\-D}}
\index{N\-I\-D@{N\-I\-D}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{N\-I\-D}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-N\-I\-D (
\begin{DoxyParamCaption}
\item[{}]{\$the\-Value = {\ttfamily NULL}, }
\item[{}]{\$get\-Old = {\ttfamily FALSE}}
\end{DoxyParamCaption}
)}}\label{class_c_persistent_document_ad9d15abc074aa3f779f214771b6123b0}
\subparagraph*{Manage native unique identifier}

The {\itshape native unique identifier}, \hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D}, represents the primary key of the object in the native format of the container in which the object is stored.

This required property does not have a default data type, it should, however, be of small size, since it represent's the object's primary index.

The method accepts a parameter which represents either the new value or the requested operation, depending on its type\-:


\begin{DoxyItemize}
\item {\ttfamily N\-U\-L\-L}\-: Return the current value. 
\item {\ttfamily F\-A\-L\-S\-E}\-: Delete the current value. 
\item {\itshape other}\-: Set the value with the provided parameter. 
\end{DoxyItemize}

The second parameter is a boolean which if {\ttfamily T\-R\-U\-E} will return the {\itshape old} value when replacing an existing value; if {\ttfamily F\-A\-L\-S\-E}, it will return th currently set value.

Note that, while this method allows the creation, modification and deletion of this property, the hosting object may prevent some of these actions, by default this attribute is locked when the object has the \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status.


\begin{DoxyParams}[1]{Parameters}
mixed & {\em \$the\-Value} & Native identifier or operation. \\
\hline
boolean & {\em \$get\-Old} & {\ttfamily T\-R\-U\-E} get old value.\\
\hline
\end{DoxyParams}
public \begin{DoxyReturn}{Returns}
mixed {\itshape New} or {\itshape old} value.
\end{DoxyReturn}
Manage\-Offset()

\begin{DoxySeeAlso}{See Also}
k\-T\-A\-G\-\_\-\-N\-I\-D 
\end{DoxySeeAlso}
\hypertarget{class_c_persistent_document_a1a3fb046a36fec064fca7cacdcc6cb3e}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Replace@{Replace}}
\index{Replace@{Replace}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Replace}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-Replace (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection}
\end{DoxyParamCaption}
)}}\label{class_c_persistent_document_a1a3fb046a36fec064fca7cacdcc6cb3e}
\subparagraph*{Replace the object into a container}

This method will insert the current object into the provided container, if not found, or update the object if already there.

The method expects a single parameter, {\ttfamily \$the\-Connection}, which represents the container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}.

The operation will only be performed if the object is not yet committed or if the object has its \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} dirty status set, if not, the method will do nothing.

Once the object has been stored, it will have its \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status set and its \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status reset.

The method may set the native unique identifier attribute (\hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D}) if not provided.

The method will return the object's native unique identifier attribute (\hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D}) or {\ttfamily N\-U\-L\-L} if the operation was not necessary.

Note that derived classes should overload the \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()} and \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} methods, rather than overloading this one.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Server, database or container.\\
\hline
\end{DoxyParams}
public \begin{DoxyReturn}{Returns}
mixed The object's native identifier.
\end{DoxyReturn}
\hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()}  \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()}  \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()}  \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()}  \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()}

\begin{DoxySeeAlso}{See Also}
k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-R\-E\-P\-L\-A\-C\-E 
\end{DoxySeeAlso}
\hypertarget{class_c_persistent_document_ac6a46b4cfed5f22ec63a6436a107ed69}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Resolve\-Class\-Container@{Resolve\-Class\-Container}}
\index{Resolve\-Class\-Container@{Resolve\-Class\-Container}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Resolve\-Class\-Container}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-Resolve\-Class\-Container (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection, }
\item[{}]{\$do\-Exception}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_ac6a46b4cfed5f22ec63a6436a107ed69}
\subparagraph*{Resolve class container}

This method should return the container used by the calling class, regardless of the provided container. The main difference between this method and \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()} is that if given a \hyperlink{class_c_container}{C\-Container} derived instance, this method will try to resolve its database and will feed it to the \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()} method.

If the method is unable to resolve the container it will raise an exception, if the second parameter is {\ttfamily T\-R\-U\-E}, or return {\ttfamily N\-U\-L\-L}.

The method will return an exception regardless of the value of the second parameter if the first parameter is neither a \hyperlink{class_c_server}{C\-Server}, a \hyperlink{class_c_database}{C\-Database} or a \hyperlink{class_c_container}{C\-Container} derived instance.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Connection object. \\
\hline
boolean & {\em \$do\-Exception} & {\ttfamily T\-R\-U\-E} raise exception.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
mixed \hyperlink{class_c_container}{C\-Container} or {\ttfamily N\-U\-L\-L} if not found.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()} \\
\hline
\end{DoxyExceptions}
\hypertarget{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Resolve\-Container@{Resolve\-Container}}
\index{Resolve\-Container@{Resolve\-Container}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Resolve\-Container}]{\setlength{\rightskip}{0pt plus 5cm}static C\-Persistent\-Document\-::\-Resolve\-Container (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection, }
\item[{}]{\$do\-Exception}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}
\subparagraph*{Resolve the container}

This method can be used to get a \hyperlink{class_c_container}{C\-Container} given an instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}. It will take advantage of the \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database()} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()} methods to obtain the value.

The first argument of this method is the connection object, the second is a boolean which determines whether the method should raise an exception if the container cannot be resolved.

The method will return an exception regardless of the value of the second parameter if the first parameter is neither a \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database} derived instance.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Connection object. \\
\hline
boolean & {\em \$do\-Exception} & {\ttfamily T\-R\-U\-E} raise exception.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
mixed \hyperlink{class_c_container}{C\-Container} or {\ttfamily N\-U\-L\-L} if not found.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \\
\hline
\end{DoxyExceptions}
\hypertarget{class_c_persistent_document_a19f7dbe659a1174d844799e403d1a678}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Restore@{Restore}}
\index{Restore@{Restore}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Restore}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-Restore (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection}
\end{DoxyParamCaption}
)}}\label{class_c_persistent_document_a19f7dbe659a1174d844799e403d1a678}
\subparagraph*{Restore the object from a container}

This method will load the current object with data from a document in a container.

The method expects a single parameter, {\ttfamily \$the\-Connection}, which represents the container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}.

The current object must have its native unique identifier offset, \hyperlink{}{k\-T\-A\-G\-\_\-\-N\-I\-D}, set, or it must have all the necessary elements in order to generate this identifier.

The method will return {\ttfamily T\-R\-U\-E} if the operation was successful, {\ttfamily N\-U\-L\-L} if the object is not present in the container, or raise an exception if an error occurs.

If the operation succeeds, the \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status will be reset and the \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status will be set.

Note that derived classes should overload the \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} method, rather than overloading this one, also note that the \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()} method is obviously not called here.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Server, database or container.\\
\hline
\end{DoxyParams}
public \begin{DoxyReturn}{Returns}
mixed The operation status.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()}  \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()}\\
\hline
\end{DoxyExceptions}
\begin{DoxySeeAlso}{See Also}
k\-T\-A\-G\-\_\-\-N\-I\-D 
\end{DoxySeeAlso}
\hypertarget{class_c_persistent_document_ae0435275b85d3d3fa6eb76711e0f0832}{\index{C\-Persistent\-Document@{C\-Persistent\-Document}!Update@{Update}}
\index{Update@{Update}!CPersistentDocument@{C\-Persistent\-Document}}
\subsubsection[{Update}]{\setlength{\rightskip}{0pt plus 5cm}C\-Persistent\-Document\-::\-Update (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Connection}
\end{DoxyParamCaption}
)}}\label{class_c_persistent_document_ae0435275b85d3d3fa6eb76711e0f0832}
\subparagraph*{Update the object in a container}

This method will update the current object into the provided container, if the object cannot be found in the container, the method will raise an exception.

The method expects a single parameter, {\ttfamily \$the\-Connection}, which represents the container in which the object should be stored. This parameter should be a concrete instance of of \hyperlink{class_c_container}{C\-Container}, or a concrete instance of \hyperlink{class_c_server}{C\-Server} or \hyperlink{class_c_database}{C\-Database}, if the current class has implemented the container resolve interface with \hyperlink{class_c_persistent_document_a6092e640e36485873b70a79db464e0ff}{Default\-Database} and \hyperlink{class_c_persistent_document_ada019252d242b5a88a26b82a18e29ed6}{Default\-Container()}.

Once the object has been stored, it will have its \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()} status set and its \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()} status reset.

The method will raise an exception if the object has not the \hyperlink{class_c_status_document_a954dee06e219e0a0f2e7fa6edac56e28}{\-\_\-\-Is\-Inited()} status set.

Note that derived classes should overload the \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()} and \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()} methods, rather than overloading this one.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Connection} & Server, database or container.\\
\hline
\end{DoxyParams}
public


\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \hyperlink{class_c_status_document_ad5193995e1bff6de09acf3248a232ef9}{\-\_\-\-Is\-Dirty()}  \hyperlink{class_c_status_document_ab7d96fd4588cf7d5432fc65a1d1fb076}{\-\_\-\-Is\-Committed()}  \hyperlink{class_c_persistent_document_a23cfbb5ebf75e008622ab9e723472c70}{\-\_\-\-Precommit()}  \hyperlink{class_c_persistent_document_a4dbe287aa3b46bdc0a1157e001078589}{Resolve\-Container()}  \hyperlink{class_c_persistent_document_aa7fdfe47ee3099ebda49a76e1fa24670}{\-\_\-\-Postcommit()}\\
\hline
\end{DoxyExceptions}
\begin{DoxySeeAlso}{See Also}
k\-F\-L\-A\-G\-\_\-\-P\-E\-R\-S\-I\-S\-T\-\_\-\-U\-P\-D\-A\-T\-E 
\end{DoxySeeAlso}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
/\-Library/\-Web\-Server/\-Library/\-P\-H\-P\-Wrapper/classes/C\-Persistent\-Document.\-php\end{DoxyCompactItemize}
