\hypertarget{class_c_mongo_query}{\section{C\-Mongo\-Query Class Reference}
\label{class_c_mongo_query}\index{C\-Mongo\-Query@{C\-Mongo\-Query}}
}
Inheritance diagram for C\-Mongo\-Query\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_c_mongo_query}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_mongo_query_a8fb40265adf169720a6f175212ef6b09}{Export} (\hyperlink{class_c_connection}{C\-Connection} \$the\-Container)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_mongo_query_a651af70656cb9894ef1885a711a0c141}{\-\_\-\-Validate\-Condition} (\$the\-Condition, \$the\-Statements, \$the\-Level)
\item 
\hyperlink{class_c_mongo_query_a8cda9306ac308f5c33456e77de004ebb}{\-\_\-\-Convert\-Condition} (\&\$the\-Query, \$the\-Container, \$the\-Condition, \$the\-Statements)
\item 
\hyperlink{class_c_mongo_query_a1f381db3f898f4c9cd333ffd2e3e989b}{\-\_\-\-Convert\-Statement} (\&\$the\-Query, \$the\-Container, \$the\-Condition, \$the\-Statement)
\item 
\hyperlink{class_c_mongo_query_a32fd372e1c39add42d078441eda3f1c3}{\-\_\-\-Order\-Range} (\$the\-Range, \hyperlink{class_c_mongo_container}{C\-Mongo\-Container} \$the\-Container, \$the\-Type)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Member Function Documentation}
\hypertarget{class_c_mongo_query_a8cda9306ac308f5c33456e77de004ebb}{\index{C\-Mongo\-Query@{C\-Mongo\-Query}!\-\_\-\-Convert\-Condition@{\-\_\-\-Convert\-Condition}}
\index{\-\_\-\-Convert\-Condition@{\-\_\-\-Convert\-Condition}!CMongoQuery@{C\-Mongo\-Query}}
\subsubsection[{\-\_\-\-Convert\-Condition}]{\setlength{\rightskip}{0pt plus 5cm}C\-Mongo\-Query\-::\-\_\-\-Convert\-Condition (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Query, }
\item[{}]{\$the\-Container, }
\item[{}]{\$the\-Condition, }
\item[{}]{\$the\-Statements}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_mongo_query_a8cda9306ac308f5c33456e77de004ebb}
\subparagraph*{Convert condition}

This method will convert the provided condition block into a Mongo compatible condition block, it is called by the \hyperlink{class_c_mongo_query_a8fb40265adf169720a6f175212ef6b09}{Export()} method or called recursively to convert embedded conditions.

The method expects the following parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \&\$the\-Query}\-: Reference to an array that will receive the converted condition. 
\item {\ttfamily \$the\-Container}\-: Data container, must be derived from \hyperlink{class_c_mongo_container}{C\-Mongo\-Container}. 
\item {\ttfamily \$the\-Condition}\-: Boolean condition code. 
\item {\ttfamily \$the\-Statements}\-: List of condition statements. 
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Query} & Receives converted query. \\
\hline
\hyperlink{class_c_mongo_container}{C\-Mongo\-Container} & {\em \$the\-Container} & Query container. \\
\hline
string & {\em \$the\-Condition} & Boolean condition. \\
\hline
array & {\em \$the\-Statements} & Statements list.\\
\hline
\end{DoxyParams}
protected \hypertarget{class_c_mongo_query_a1f381db3f898f4c9cd333ffd2e3e989b}{\index{C\-Mongo\-Query@{C\-Mongo\-Query}!\-\_\-\-Convert\-Statement@{\-\_\-\-Convert\-Statement}}
\index{\-\_\-\-Convert\-Statement@{\-\_\-\-Convert\-Statement}!CMongoQuery@{C\-Mongo\-Query}}
\subsubsection[{\-\_\-\-Convert\-Statement}]{\setlength{\rightskip}{0pt plus 5cm}C\-Mongo\-Query\-::\-\_\-\-Convert\-Statement (
\begin{DoxyParamCaption}
\item[{\&}]{\$the\-Query, }
\item[{}]{\$the\-Container, }
\item[{}]{\$the\-Condition, }
\item[{}]{\$the\-Statement}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_mongo_query_a1f381db3f898f4c9cd333ffd2e3e989b}
\subparagraph*{Convert statement}

This method can be used to convert a condition statement to a Mongo compatible statement, it is called by the \hyperlink{class_c_mongo_query_a8cda9306ac308f5c33456e77de004ebb}{\-\_\-\-Convert\-Condition()} method which feeds it each element of the condition block.

The method expects the following parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \&\$the\-Query}\-: Reference to an array that will receive the converted statement. 
\item {\ttfamily \$the\-Container}\-: Data container, must be derived from \hyperlink{class_c_mongo_container}{C\-Mongo\-Container} and we assume this check has been done by the caller. 
\item {\ttfamily \$the\-Condition}\-: Boolean condition code. 
\item {\ttfamily \$the\-Statement}\-: Statement or embedded condition. 
\end{DoxyItemize}

Note that this method will recursively call \hyperlink{class_c_mongo_query_a8cda9306ac308f5c33456e77de004ebb}{\-\_\-\-Convert\-Condition()} if the current element of the provided statement is a condition code\-: this means that the element is a nested condition.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Query} & Receives converted statement. \\
\hline
\hyperlink{class_c_mongo_container}{C\-Mongo\-Container} & {\em \$the\-Container} & Query container. \\
\hline
string & {\em \$the\-Condition} & Boolean condition. \\
\hline
array & {\em \$the\-Statement} & Statement.\\
\hline
\end{DoxyParams}
protected \hypertarget{class_c_mongo_query_a32fd372e1c39add42d078441eda3f1c3}{\index{C\-Mongo\-Query@{C\-Mongo\-Query}!\-\_\-\-Order\-Range@{\-\_\-\-Order\-Range}}
\index{\-\_\-\-Order\-Range@{\-\_\-\-Order\-Range}!CMongoQuery@{C\-Mongo\-Query}}
\subsubsection[{\-\_\-\-Order\-Range}]{\setlength{\rightskip}{0pt plus 5cm}C\-Mongo\-Query\-::\-\_\-\-Order\-Range (
\begin{DoxyParamCaption}
\item[{}]{\$the\-Range, }
\item[{{\bf C\-Mongo\-Container}}]{\$the\-Container, }
\item[{}]{\$the\-Type}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_mongo_query_a32fd372e1c39add42d078441eda3f1c3}
\subparagraph*{Order range elements}

This method will order the provided range elements, the method accepts an array of two elements which represent the range bounds and will return an array with the two provided elements sorted.

The method accepts three parameters\-:


\begin{DoxyItemize}
\item {\ttfamily \$the\-Range}\-: An array containing two elements representing the range bounds. 
\item {\ttfamily \$the\-Container}\-: The \hyperlink{class_c_mongo_container}{C\-Mongo\-Container} on which the query will be executed. 
\item {\ttfamily \$the\-Type}\-: The data type of the range elements. 
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
mixed & {\em \$the\-Range} & Range elements. \\
\hline
\hyperlink{class_c_mongo_container}{C\-Mongo\-Container} & {\em \$the\-Container} & Query container. \\
\hline
string & {\em \$the\-Type} & Elements data type.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
array 
\end{DoxyReturn}
\hypertarget{class_c_mongo_query_a651af70656cb9894ef1885a711a0c141}{\index{C\-Mongo\-Query@{C\-Mongo\-Query}!\-\_\-\-Validate\-Condition@{\-\_\-\-Validate\-Condition}}
\index{\-\_\-\-Validate\-Condition@{\-\_\-\-Validate\-Condition}!CMongoQuery@{C\-Mongo\-Query}}
\subsubsection[{\-\_\-\-Validate\-Condition}]{\setlength{\rightskip}{0pt plus 5cm}C\-Mongo\-Query\-::\-\_\-\-Validate\-Condition (
\begin{DoxyParamCaption}
\item[{}]{\$the\-Condition, }
\item[{}]{\$the\-Statements, }
\item[{}]{\$the\-Level}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_c_mongo_query_a651af70656cb9894ef1885a711a0c141}
\subparagraph*{Validate condition}

This method expects a condition as its argument, it will check if it is a valid condition, then it will validate all condition statements.

In this class we handle queries to Mongo databases, so the depth of the query conditions cannot go beyond 2 levels.

We overload this method to prevent nesting O\-R conditions.


\begin{DoxyParams}[1]{Parameters}
string & {\em \$the\-Condition} & Boolean condition. \\
\hline
array & {\em \$the\-Statements} & Statements list. \\
\hline
integer & {\em \$the\-Level} & \mbox{[}P\-R\-I\-V\-A\-T\-E\mbox{]} condition level.\\
\hline
\end{DoxyParams}
protected \hypertarget{class_c_mongo_query_a8fb40265adf169720a6f175212ef6b09}{\index{C\-Mongo\-Query@{C\-Mongo\-Query}!Export@{Export}}
\index{Export@{Export}!CMongoQuery@{C\-Mongo\-Query}}
\subsubsection[{Export}]{\setlength{\rightskip}{0pt plus 5cm}C\-Mongo\-Query\-::\-Export (
\begin{DoxyParamCaption}
\item[{{\bf C\-Connection}}]{\$the\-Container}
\end{DoxyParamCaption}
)}}\label{class_c_mongo_query_a8fb40265adf169720a6f175212ef6b09}
\subparagraph*{Export query}

We overload the inherited method to generate Mongo specific queries.

The method will first check if the provided container is a \hyperlink{class_c_mongo_container}{C\-Mongo\-Container}, it will then iterate all conditions and feed each to a protected method, \hyperlink{class_c_mongo_query_a8cda9306ac308f5c33456e77de004ebb}{\-\_\-\-Convert\-Condition()}, that will take care of converting the query elements.


\begin{DoxyParams}[1]{Parameters}
\hyperlink{class_c_connection}{C\-Connection} & {\em \$the\-Container} & Query container.\\
\hline
\end{DoxyParams}
public \begin{DoxyReturn}{Returns}
array
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \\
\hline
\end{DoxyExceptions}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
/\-Library/\-Web\-Server/\-Library/\-P\-H\-P\-Wrapper/classes/C\-Mongo\-Query.\-php\end{DoxyCompactItemize}
